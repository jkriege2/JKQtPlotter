<!-- HTML header for doxygen 1.9.3-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>JKQTPlotter: Tutorial (JKQTPDatastore): Basic Usage of JKQTPDatastore</title>
<meta name="description" content="an extensive Qt5+Qt6 Plotter framework (including a feature-richt plotter widget, a speed-optimized, but limited variant and a LaTeX equation renderer!), written fully in C/C++ and without external dependencies">
<meta name="keywords" lang="en-us" content="C++, C++11, Qt, Qt5, Qt6, Plotting, Plot, Chart, Graph, Qt, Widget, C++, Library, Visualization, charting library, plotting library, scientific visualization, data visualization, statistics, statistical methods, statistics library, LaTeX parser, LaTeX renderer, Qt widget, Qt5 widget, Qt6 widget, Qt charts, Qt plots, barchart, violinplot, boxplot, JKQtPlotter, JKQTMathText, JKQTFastPlotter">
<meta name="author" content="$author">
<meta name="copyright" content="(c) 2008-2022 by $author">
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="jkqtplotter_stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo_doxygen.png"/></td>
  <td id="projectalign">
   <div id="projectname">JKQTPlotter<span id="projectnumber">&#160;trunk/v5.0.0</span>
   </div>
   <div id="projectbrief">an extensive Qt5+Qt6 Plotter framework (including a feature-richt plotter widget, a speed-optimized, but limited variant and a LaTeX equation renderer!), written fully in C/C++ and without external dependencies</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<div id="main-nav">
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="topics.html"><span>Topics</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect" class="search-icon" onmouseover="return searchBox.OnSearchSelectShow()" onmouseout="return searchBox.OnSearchSelectHide()"><span class="search-icon-dropdown"></span></span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><div id="MSearchCloseImg" class="close-icon"></div></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- main-nav -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('_j_k_q_t_plotter_basic_j_k_q_t_p_datastore.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Tutorial (JKQTPDatastore): Basic Usage of JKQTPDatastore </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_examples_2datastore_2_r_e_a_d_m_e"></a></p>
<p>This tutorial project (see <span class="tt">./examples/datastore/</span>) explains several options of <a class="el" href="class_j_k_q_t_p_datastore.html" title="This class manages data columns (with entries of type double ), used by JKQTPlotter/JKQTBasePlotter t...">JKQTPDatastore</a>, which is the class used to centrally store the data for (most) graphs on a <a class="el" href="class_j_k_q_t_plotter.html" title="plotter widget for scientific plots (uses JKQTBasePlotter to do the actual drawing)">JKQTPlotter</a> widget.</p>
<p><em><b>Note</b></em> that there are additional tutorial explaining other aspects of data mangement in <a class="el" href="class_j_k_q_t_p_datastore.html" title="This class manages data columns (with entries of type double ), used by JKQTPlotter/JKQTBasePlotter t...">JKQTPDatastore</a>:</p><ul>
<li><a class="el" href="_j_k_q_t_plotter_basic_j_k_q_t_p_datastore.html">Basic Usage of JKQTPDatastore</a></li>
<li><a class="el" href="_j_k_q_t_plotter_basic_j_k_q_t_p_datastore_iterators.html">Iterator-Based usage of JKQTPDatastore</a></li>
<li><a class="el" href="_j_k_q_t_plotter_basic_j_k_q_t_p_datastore_statistics.html">Advanced 1-Dimensional Statistics with JKQTPDatastore</a></li>
<li><a class="el" href="_j_k_q_t_plotter_basic_j_k_q_t_p_datastore_regression.html">Regression Analysis (with the Statistics Library)</a></li>
<li><a class="el" href="_j_k_q_t_plotter_basic_j_k_q_t_p_datastore_statistics_grouped_stat.html">1-Dimensional Group Statistics with JKQTPDatastore</a></li>
<li><a class="el" href="_j_k_q_t_plotter_basic_j_k_q_t_p_datastore_statistics2_d.html">Advanced 2-Dimensional Statistics with JKQTPDatastore</a></li>
</ul>
<p>The source code of the main application can be found in <a href="https://github.com/jkriege2/JKQtPlotter/tree/master/examples/datastore/datastore.cpp"><span class="tt">datastore.cpp</span></a>. This tutorial cites parts of this code to demonstrate different ways of working with data for the graphs.</p>
<p>In every code-segment below, we will use these two declarations from the code to access the internal datastore of the <a class="el" href="class_j_k_q_t_plotter.html" title="plotter widget for scientific plots (uses JKQTBasePlotter to do the actual drawing)">JKQTPlotter</a> instance: </p><div class="fragment"><div class="line"><span class="comment">// 1. create a plotter window and get a pointer to the internal datastore (for convenience)</span></div>
<div class="line"><a class="code hl_class" href="class_j_k_q_t_plotter.html">JKQTPlotter</a> plot;</div>
<div class="line"><a class="code hl_class" href="class_j_k_q_t_p_datastore.html">JKQTPDatastore</a>* datastore=plot.<a class="code hl_function" href="class_j_k_q_t_plotter.html#ae31c276a93cbf7aa8f9c153327aa5b74">getDatastore</a>();</div>
<div class="ttc" id="aclass_j_k_q_t_p_datastore_html"><div class="ttname"><a href="class_j_k_q_t_p_datastore.html">JKQTPDatastore</a></div><div class="ttdoc">This class manages data columns (with entries of type double ), used by JKQTPlotter/JKQTBasePlotter t...</div><div class="ttdef"><b>Definition</b> jkqtpdatastorage.h:282</div></div>
<div class="ttc" id="aclass_j_k_q_t_plotter_html"><div class="ttname"><a href="class_j_k_q_t_plotter.html">JKQTPlotter</a></div><div class="ttdoc">plotter widget for scientific plots (uses JKQTBasePlotter to do the actual drawing)</div><div class="ttdef"><b>Definition</b> jkqtplotter.h:374</div></div>
<div class="ttc" id="aclass_j_k_q_t_plotter_html_ae31c276a93cbf7aa8f9c153327aa5b74"><div class="ttname"><a href="class_j_k_q_t_plotter.html#ae31c276a93cbf7aa8f9c153327aa5b74">JKQTPlotter::getDatastore</a></div><div class="ttdeci">JKQTPDatastore * getDatastore()</div><div class="ttdoc">returns a pointer to the datastore used by this object</div><div class="ttdef"><b>Definition</b> jkqtplotter.h:621</div></div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md16"></a>
Copying Data from External COntainers into JKQTPDatastore</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md17"></a>
Copy Data from a Vector into a column of the JKQTPDatastore</h2>
<p>First we fill data into a QVector for a simple plot (a sine curve) and add a plot using this data: </p><div class="fragment"><div class="line">QVector&lt;double&gt; X, Y;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">int</span> Ndata=100;</div>
<div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;Ndata; i++) {</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">double</span> x=double(i)/double(Ndata)*8.0*M_PI;</div>
<div class="line">    X&lt;&lt;x;</div>
<div class="line">    Y&lt;&lt;sin(x);</div>
<div class="line">}</div>
</div><!-- fragment --><p> Now the contents of the vector is copied into the datastore using <span class="tt"><a class="el" href="class_j_k_q_t_p_datastore.html#a3d6b9f2649736b08b6731132f86368f6" title="add one column to the datastore. It will be filled with the values from first ... last">JKQTPDatastore::addCopiedColumn()</a></span>. After this operation, the contents of the vectors <span class="tt">X</span> and <span class="tt">Y</span> can be altered, as the <span class="tt"><a class="el" href="class_j_k_q_t_p_datastore.html" title="This class manages data columns (with entries of type double ), used by JKQTPlotter/JKQTBasePlotter t...">JKQTPDatastore</a></span> inside the <span class="tt"><a class="el" href="class_j_k_q_t_plotter.html" title="plotter widget for scientific plots (uses JKQTBasePlotter to do the actual drawing)">JKQTPlotter</a></span> now hosts its own copy of the data. </p><div class="fragment"><div class="line">plot.<a class="code hl_function" href="class_j_k_q_t_plotter.html#a63a54c5342d664c35ffb3d532ba26b99">addGraph</a>(linegraph=<span class="keyword">new</span> <a class="code hl_class" href="class_j_k_q_t_p_x_y_line_graph.html">JKQTPXYLineGraph</a>(&amp;plot));</div>
<div class="line">linegraph-&gt;setXColumn(ds-&gt;addCopiedColumn(X, <span class="stringliteral">&quot;x&quot;</span>));</div>
<div class="line">linegraph-&gt;setYColumn(ds-&gt;addCopiedColumn(Y, <span class="stringliteral">&quot;y&quot;</span>));</div>
<div class="line">linegraph-&gt;setTitle(QObject::tr(<span class="stringliteral">&quot;sine graph&quot;</span>));</div>
<div class="ttc" id="aclass_j_k_q_t_p_x_y_line_graph_html"><div class="ttname"><a href="class_j_k_q_t_p_x_y_line_graph.html">JKQTPXYLineGraph</a></div><div class="ttdoc">This implements xy line plots. This also alows to draw symbols at the data points.</div><div class="ttdef"><b>Definition</b> jkqtplines.h:61</div></div>
<div class="ttc" id="aclass_j_k_q_t_plotter_html_a63a54c5342d664c35ffb3d532ba26b99"><div class="ttname"><a href="class_j_k_q_t_plotter.html#a63a54c5342d664c35ffb3d532ba26b99">JKQTPlotter::addGraph</a></div><div class="ttdeci">size_t addGraph(JKQTPPlotElement *gr)</div><div class="ttdef"><b>Definition</b> jkqtplotter.h:796</div></div>
</div><!-- fragment --><p> Note that you could also use a <span class="tt">std::vector</span> instead, as <span class="tt"><a class="el" href="class_j_k_q_t_p_datastore.html#a3d6b9f2649736b08b6731132f86368f6" title="add one column to the datastore. It will be filled with the values from first ... last">JKQTPDatastore::addCopiedColumn()</a></span> is a template function that only requires the container to support C++ standard iterations (with <span class="tt">begin()</span> and <span class="tt">end()</span>), as well as the function <span class="tt">size()</span> to determine the number of items in the container. Also other datatypes than <span class="tt">double</span> are possible, as long as they can be converted to <span class="tt">double</span> (the function <span class="tt"><a class="el" href="group__jkqtptools__math__basic.html#ga966c1a713f60bd026db4f35f7007eb7e" title="converts a boolean to a double, is used to convert boolean to double by JKQTPDatastore">jkqtp_todouble()</a></span> is used to perform the conversion, notably all integer and floating-point types, as well as <span class="tt">bool</span> are supported out of the box).</p>
<p>The plot from the code above looks like this:</p>
<p><img src="https://raw.githubusercontent.com/jkriege2/JKQtPlotter/master/screenshots/datastore_sine.png" alt="datastore_sine" class="inline"/></p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md18"></a>
Copy Data from a C-array into a Column of the JKQTPDatastore</h2>
<p>Of course if you have your data in a C-array, you can use the same syntax: </p><div class="fragment"><div class="line"><span class="preprocessor">#define NDATA 5</span></div>
<div class="line"><span class="keywordtype">double</span> X[NDATA]= { 1, 2, 3, 4, 5 };</div>
<div class="line"><span class="keywordtype">double</span> Y[NDATA]= { 1, 0, 1, 0, 1 };</div>
<div class="line">linegraph-&gt;setXColumn(datastore-&gt;<a class="code hl_function" href="class_j_k_q_t_p_datastore.html#a3d6b9f2649736b08b6731132f86368f6">addCopiedColumn</a>(X, NDATA, <span class="stringliteral">&quot;x&quot;</span>));</div>
<div class="line">linegraph-&gt;setYColumn(datastore-&gt;<a class="code hl_function" href="class_j_k_q_t_p_datastore.html#a3d6b9f2649736b08b6731132f86368f6">addCopiedColumn</a>(Y, NDATA, <span class="stringliteral">&quot;Y&quot;</span>));</div>
<div class="ttc" id="aclass_j_k_q_t_p_datastore_html_a3d6b9f2649736b08b6731132f86368f6"><div class="ttname"><a href="class_j_k_q_t_p_datastore.html#a3d6b9f2649736b08b6731132f86368f6">JKQTPDatastore::addCopiedColumn</a></div><div class="ttdeci">size_t addCopiedColumn(TIterator first, TIterator last, const QString &amp;name=QString(&quot;&quot;))</div><div class="ttdoc">add one column to the datastore. It will be filled with the values from first ... last</div><div class="ttdef"><b>Definition</b> jkqtpdatastorage.h:871</div></div>
</div><!-- fragment --><p>The plot from the code above looks like this:</p>
<p><img src="https://raw.githubusercontent.com/jkriege2/JKQtPlotter/master/screenshots/datastore_linkedcarray.png" alt="datastore_linkedcarray" class="inline"/></p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md19"></a>
Copy Data from a Map into a JKQTPDatastore</h2>
<p>Since graphs often display (x,y)-pairs, it may make sense to store them in a map (e.g. for histograms). There there are also functions that copy the contents of a map into a <a class="el" href="class_j_k_q_t_p_datastore.html" title="This class manages data columns (with entries of type double ), used by JKQTPlotter/JKQTBasePlotter t...">JKQTPDatastore</a>, resulting in two columns beeing added: </p><div class="fragment"><div class="line">std::map&lt;int, double&gt; datamap;</div>
<div class="line">datamap[1]=1.1;</div>
<div class="line">datamap[2]=1.4;</div>
<div class="line">datamap[4]=1.2;</div>
<div class="line">datamap[5]=1.8;</div>
<div class="line">datamap[7]=0.9;</div>
<div class="line">plot.<a class="code hl_function" href="class_j_k_q_t_plotter.html#a63a54c5342d664c35ffb3d532ba26b99">addGraph</a>(linegraph=<span class="keyword">new</span> <a class="code hl_class" href="class_j_k_q_t_p_x_y_line_graph.html">JKQTPXYLineGraph</a>(&amp;plot));</div>
<div class="line">linegraph-&gt;setXYColumns(datastore-&gt;<a class="code hl_function" href="class_j_k_q_t_p_datastore.html#a791b38ec8f11db99af05467613e5b69f">addCopiedMap</a>(datamap, <span class="stringliteral">&quot;map_x&quot;</span>, <span class="stringliteral">&quot;map_y&quot;</span>));</div>
<div class="line">linegraph-&gt;setTitle(QObject::tr(<span class="stringliteral">&quot;copied map&quot;</span>));</div>
<div class="ttc" id="aclass_j_k_q_t_p_datastore_html_a791b38ec8f11db99af05467613e5b69f"><div class="ttname"><a href="class_j_k_q_t_p_datastore.html#a791b38ec8f11db99af05467613e5b69f">JKQTPDatastore::addCopiedMap</a></div><div class="ttdeci">std::pair&lt; size_t, size_t &gt; addCopiedMap(TIterator first, TIterator last, const QString &amp;nameKey=QString(&quot;map_key&quot;), const QString &amp;nameValue=QString(&quot;map_value&quot;))</div><div class="ttdoc">copies the contents of the map-like container c into two columns of the datastore,...</div><div class="ttdef"><b>Definition</b> jkqtpdatastorage.h:1196</div></div>
</div><!-- fragment --><p> This code results in a graph like this:</p>
<p><img src="https://raw.githubusercontent.com/jkriege2/JKQtPlotter/master/screenshots/datastore_map.png" alt="datastore_map" class="inline"/></p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md20"></a>
Reference External Data in a column of the JKQTPDatastore</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md21"></a>
Referencing without transfer of ownership</h2>
<p>As an alternative to the method of copying data (see above), you could also just link the data. For this to work, the data has to reside in a C-array of type <span class="tt">double</span>, as this is the internal datatype of the <span class="tt"><a class="el" href="class_j_k_q_t_p_datastore.html" title="This class manages data columns (with entries of type double ), used by JKQTPlotter/JKQTBasePlotter t...">JKQTPDatastore</a></span>. You can simply replace the two lines with <span class="tt"><a class="el" href="class_j_k_q_t_p_datastore.html#a3d6b9f2649736b08b6731132f86368f6" title="add one column to the datastore. It will be filled with the values from first ... last">JKQTPDatastore::addCopiedColumn()</a></span> in the example above by (we exploit the fact that <span class="tt">QVector&lt;double&gt;::data()</span> returns a pointer to the internal C-array of the vector): </p><div class="fragment"><div class="line">linegraph-&gt;setXColumn(datastore-&gt;<a class="code hl_function" href="class_j_k_q_t_p_datastore.html#ae057eda96c7b754cd42f4380b429a589">addColumn</a>(X.data(), X.size(), <span class="stringliteral">&quot;x&quot;</span>));</div>
<div class="line">linegraph-&gt;setYColumn(datastore-&gt;<a class="code hl_function" href="class_j_k_q_t_p_datastore.html#ae057eda96c7b754cd42f4380b429a589">addColumn</a>(Y.data(), Y.size(), <span class="stringliteral">&quot;Y&quot;</span>));</div>
<div class="ttc" id="aclass_j_k_q_t_p_datastore_html_ae057eda96c7b754cd42f4380b429a589"><div class="ttname"><a href="class_j_k_q_t_p_datastore.html#ae057eda96c7b754cd42f4380b429a589">JKQTPDatastore::addColumn</a></div><div class="ttdeci">size_t addColumn(JKQTPColumn col)</div><div class="ttdoc">add a new column to the datastore and return its ID</div></div>
</div><!-- fragment --><p> Of course if you have your data in a C-array, you can use the same syntax: </p><div class="fragment"><div class="line"><span class="preprocessor">#define NDATA 5</span></div>
<div class="line"><span class="keywordtype">double</span> XCA[NDATA]= { 1, 2, 3, 4, 5 };</div>
<div class="line"><span class="keywordtype">double</span> YCA[NDATA]= { 1, 0, 1, 0, 1 };</div>
<div class="line">linegraph-&gt;setXColumn(datastore-&gt;<a class="code hl_function" href="class_j_k_q_t_p_datastore.html#ae057eda96c7b754cd42f4380b429a589">addColumn</a>(XCA, NDATA, <span class="stringliteral">&quot;x&quot;</span>));</div>
<div class="line">linegraph-&gt;setYColumn(datastore-&gt;<a class="code hl_function" href="class_j_k_q_t_p_datastore.html#ae057eda96c7b754cd42f4380b429a589">addColumn</a>(YCA, NDATA, <span class="stringliteral">&quot;Y&quot;</span>));</div>
</div><!-- fragment --><p> This method is especially useful, when you have large datasets (e.g. images) that you don't want to copy around.</p>
<p>Note however that the ownership of the data is not transfered to the <a class="el" href="class_j_k_q_t_p_datastore.html" title="This class manages data columns (with entries of type double ), used by JKQTPlotter/JKQTBasePlotter t...">JKQTPDatastore</a>, i.e. you have to ensure that the data behind the pointer exists, as long as the column references the array and you have to ensure that the data is freed, when you don't need it any more.</p>
<p>The plot from the code above looks like this:</p>
<p><img src="https://raw.githubusercontent.com/jkriege2/JKQtPlotter/master/screenshots/datastore_linkedcarray.png" alt="datastore_linkedcarray" class="inline"/></p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md22"></a>
Referencing with Transfer of Ownership</h2>
<p>In addition to the variants of <span class="tt"><a class="el" href="class_j_k_q_t_p_datastore.html#ae057eda96c7b754cd42f4380b429a589" title="add a new column to the datastore and return its ID">JKQTPDatastore::addColumn()</a></span>, that do not transfer ownership of the data to the <span class="tt"><a class="el" href="class_j_k_q_t_p_datastore.html" title="This class manages data columns (with entries of type double ), used by JKQTPlotter/JKQTBasePlotter t...">JKQTPDatastore</a></span>, you can also use <span class="tt"><a class="el" href="class_j_k_q_t_p_datastore.html#a638f27f47168cf4cf136875e055d9486" title="add a column with rows entries from the array data, ownership of the memory behind data is transfered...">JKQTPDatastore::addInternalColumn()</a></span>, which tells the <span class="tt"><a class="el" href="class_j_k_q_t_p_datastore.html" title="This class manages data columns (with entries of type double ), used by JKQTPlotter/JKQTBasePlotter t...">JKQTPDatastore</a></span> to use the external data array and also take over its owner-ship. This implies that the array is freed when the <span class="tt"><a class="el" href="class_j_k_q_t_p_datastore.html" title="This class manages data columns (with entries of type double ), used by JKQTPlotter/JKQTBasePlotter t...">JKQTPDatastore</a></span> is destroyed, by calling <span class="tt">free()</span> in the array. Therefor data for this method needs to be allocated by using <span class="tt">malloc()</span> or <span class="tt">calloc()</span>: </p><div class="fragment"><div class="line"><span class="preprocessor">#define NDATA 5</span></div>
<div class="line"><span class="keywordtype">double</span>* XCA=(<span class="keywordtype">double</span>*)malloc(NDATA, <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>));</div>
<div class="line">...</div>
<div class="line">linegraph-&gt;setXColumn(datastore-&gt;<a class="code hl_function" href="class_j_k_q_t_p_datastore.html#a638f27f47168cf4cf136875e055d9486">addInternalColumn</a>(XCA, NDATA, <span class="stringliteral">&quot;x&quot;</span>));</div>
<div class="ttc" id="aclass_j_k_q_t_p_datastore_html_a638f27f47168cf4cf136875e055d9486"><div class="ttname"><a href="class_j_k_q_t_p_datastore.html#a638f27f47168cf4cf136875e055d9486">JKQTPDatastore::addInternalColumn</a></div><div class="ttdeci">size_t addInternalColumn(double *data, size_t rows, const QString &amp;name)</div><div class="ttdoc">add a column with rows entries from the array data, ownership of the memory behind data is transfered...</div></div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md23"></a>
JKQTPDatastore-internal Data Management</h1>
<p>It is also possible to leave the data mangement completely to the <a class="el" href="class_j_k_q_t_p_datastore.html" title="This class manages data columns (with entries of type double ), used by JKQTPlotter/JKQTBasePlotter t...">JKQTPDatastore</a> and just edit the data with access functions from <a class="el" href="class_j_k_q_t_p_datastore.html" title="This class manages data columns (with entries of type double ), used by JKQTPlotter/JKQTBasePlotter t...">JKQTPDatastore</a>.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md24"></a>
Generating Non-Initialized Columns and Filling Them</h2>
<p>The most basic way to generate data for a plot is to generate two non-initialized columns for the x- and y-coordinates of the graph points </p><div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keywordtype">int</span> Ndata=100;</div>
<div class="line"><span class="keywordtype">size_t</span> colX=datastore-&gt;<a class="code hl_function" href="class_j_k_q_t_p_datastore.html#ae057eda96c7b754cd42f4380b429a589">addColumn</a>(Ndata, <span class="stringliteral">&quot;x&quot;</span>);</div>
<div class="line"><span class="keywordtype">size_t</span> colY=datastore-&gt;<a class="code hl_function" href="class_j_k_q_t_p_datastore.html#ae057eda96c7b754cd42f4380b429a589">addColumn</a>(Ndata, <span class="stringliteral">&quot;y&quot;</span>);</div>
</div><!-- fragment --><p> These calls to <a class="el" href="class_j_k_q_t_p_datastore.html#ae057eda96c7b754cd42f4380b429a589" title="add a new column to the datastore and return its ID">JKQTPDatastore::addColumn()</a> will generate a column each with with <span class="tt">ndata</span> uninitialized entries. Then use <a class="el" href="class_j_k_q_t_p_datastore.html#a4597feb9ac51c2a717e2028ef73e0e8b" title="sets the value at position (column, row). column is the logical column and will be mapped to the acco...">JKQTPDatastore::set()</a> to fill them with data: </p><div class="fragment"><div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;Ndata; i++) {</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">double</span> x=double(i)/double(Ndata)*8.0*M_PI;</div>
<div class="line">    datastore-&gt;<a class="code hl_function" href="class_j_k_q_t_p_datastore.html#a4597feb9ac51c2a717e2028ef73e0e8b">set</a>(colX, i, x);</div>
<div class="line">    datastore-&gt;<a class="code hl_function" href="class_j_k_q_t_p_datastore.html#a4597feb9ac51c2a717e2028ef73e0e8b">set</a>(colY, i, sin(x));</div>
<div class="line">}</div>
<div class="ttc" id="aclass_j_k_q_t_p_datastore_html_a4597feb9ac51c2a717e2028ef73e0e8b"><div class="ttname"><a href="class_j_k_q_t_p_datastore.html#a4597feb9ac51c2a717e2028ef73e0e8b">JKQTPDatastore::set</a></div><div class="ttdeci">void set(size_t column, size_t row, double value)</div><div class="ttdoc">sets the value at position (column, row). column is the logical column and will be mapped to the acco...</div><div class="ttdef"><b>Definition</b> jkqtpdatastorage.h:2700</div></div>
</div><!-- fragment --><p>Plotting these two columns versus each other results in a simple sine graph:</p>
<p><img src="https://raw.githubusercontent.com/jkriege2/JKQtPlotter/master/screenshots/datastore_sine.png" alt="datastore_sine" class="inline"/></p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md25"></a>
Generating Columns Preinitialized Columns</h2>
<p>For your convenience there are also function that simply create such a linear vector with one call: </p><div class="fragment"><div class="line"><span class="keywordtype">size_t</span> colLinX=datastore-&gt;<a class="code hl_function" href="class_j_k_q_t_p_datastore.html#a5e33ba3499be747d654639e4987c0b52">addLinearColumn</a>(count, 0, 20, <span class="stringliteral">&quot;x_lin&quot;</span>);</div>
<div class="ttc" id="aclass_j_k_q_t_p_datastore_html_a5e33ba3499be747d654639e4987c0b52"><div class="ttname"><a href="class_j_k_q_t_p_datastore.html#a5e33ba3499be747d654639e4987c0b52">JKQTPDatastore::addLinearColumn</a></div><div class="ttdeci">size_t addLinearColumn(size_t rows, double start, double end, const QString &amp;name=QString(&quot;&quot;))</div><div class="ttdoc">add a column to the datastore that contains rows rows with monotonely increasing value starting at st...</div></div>
</div><!-- fragment --><p> This call is equivalent to </p><div class="fragment"><div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i=0; i&lt;count; i++) {</div>
<div class="line">    datastore-&gt;<a class="code hl_function" href="class_j_k_q_t_p_datastore.html#a4597feb9ac51c2a717e2028ef73e0e8b">set</a>(colLinX, i, 0.0+<span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(i)/<span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(count-1)*20.0);</div>
<div class="line">}</div>
</div><!-- fragment --><p>In both cases the column <span class="tt">colLinX</span> will contain these numbers afterwards: </p><div class="fragment"><div class="line">0, 0.512821, 1.02564, 1.53846, 2.05128, 2.5641, 3.07692, ..., 18.9744, 19.4872, 20</div>
</div><!-- fragment --><p>Comparable functions exist for logarithmically spaced columns (<span class="tt"><a class="el" href="class_j_k_q_t_p_datastore.html#affda1ff5a437385986cbb01a422c73bd" title="add a column to the datastore that contains rows rows with monotonely increasing value starting at st...">JKQTPDatastore::addLogColumn()</a></span> and <span class="tt"><a class="el" href="class_j_k_q_t_p_datastore.html#a7d6b0adeecd3054ac7cf15e0ce81d71e" title="add a column to the datastore that contains rows rows with monotonely increasing value starting at 10...">JKQTPDatastore::addDecadeLogColumn()</a></span> which only differ in the way the start and end values are specified): </p><div class="fragment"><div class="line"><span class="keywordtype">size_t</span> colLogX=datastore-&gt;<a class="code hl_function" href="class_j_k_q_t_p_datastore.html#affda1ff5a437385986cbb01a422c73bd">addLogColumn</a>(30, 1, 1000, <span class="stringliteral">&quot;x_log&quot;</span>);</div>
<div class="ttc" id="aclass_j_k_q_t_p_datastore_html_affda1ff5a437385986cbb01a422c73bd"><div class="ttname"><a href="class_j_k_q_t_p_datastore.html#affda1ff5a437385986cbb01a422c73bd">JKQTPDatastore::addLogColumn</a></div><div class="ttdeci">size_t addLogColumn(size_t rows, double start, double end, const QString &amp;name=QString(&quot;&quot;))</div><div class="ttdoc">add a column to the datastore that contains rows rows with monotonely increasing value starting at st...</div></div>
</div><!-- fragment --><p> This call results in a column with these 30 values spanning the range between 1 and 1000: </p><div class="fragment"><div class="line">1, 1.26896, 1.61026, 2.04336, ..., 8.53168, 10.8264, 13.7382, ..., 72.7895, 92.3671, ..., 788.046, 1000</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md26"></a>
Appending to Columns</h2>
<p>You can use the methods <span class="tt"><a class="el" href="class_j_k_q_t_p_datastore.html#a3a992ac63957ce0c521e48944f704d91" title="adds a value value to the column column. This changes the column length (number of rows).">JKQTPDatastore::appendToColumn()</a></span> and <span class="tt"><a class="el" href="class_j_k_q_t_p_datastore.html#a0d61f76d5db9974ddde11eaa175f94c2" title="adds a values in container values to the column column. This changes the column length (number of row...">JKQTPDatastore::appendFromContainerToColumn()</a></span> to extend columns with additional values, e.g.: </p><div class="fragment"><div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">double</span> ii=10; ii&lt;=20; ii++) datastore-&gt;<a class="code hl_function" href="class_j_k_q_t_p_datastore.html#a3a992ac63957ce0c521e48944f704d91">appendToColumn</a>(columnID, ii);</div>
<div class="ttc" id="aclass_j_k_q_t_p_datastore_html_a3a992ac63957ce0c521e48944f704d91"><div class="ttname"><a href="class_j_k_q_t_p_datastore.html#a3a992ac63957ce0c521e48944f704d91">JKQTPDatastore::appendToColumn</a></div><div class="ttdeci">void appendToColumn(size_t column, double value)</div><div class="ttdoc">adds a value value to the column column. This changes the column length (number of rows).</div></div>
</div><!-- fragment --><p> Note that this operation changes the column length (number of rows). If the memory was externally managed before, it will be internally managed afterwards! If the first append is called on a column that cannot be extended, the contents will be copied and the column will reference the new, internally managed, memory afterwards.</p>
<p>Alterantively there is also a <span class="tt">std::back_inserter</span>-like interface to append to a column: </p><div class="fragment"><div class="line"><span class="keyword">auto</span> it=datastore-&gt;<a class="code hl_function" href="class_j_k_q_t_p_datastore.html#a1c8222b11049de01139fcd4603ba272c">backInserter</a>(columnID);</div>
<div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">double</span> ii=10; ii&lt;=20; ii++) *++it=ii;</div>
<div class="ttc" id="aclass_j_k_q_t_p_datastore_html_a1c8222b11049de01139fcd4603ba272c"><div class="ttname"><a href="class_j_k_q_t_p_datastore.html#a1c8222b11049de01139fcd4603ba272c">JKQTPDatastore::backInserter</a></div><div class="ttdeci">JKQTPColumnBackInserter backInserter(int i)</div><div class="ttdoc">returns a back-inserter iterator (JKQTPColumnBackInserter) to the i -th column in the JKQTPDatastore</div></div>
</div><!-- fragment --><p>This, together with <span class="tt"><a class="el" href="class_j_k_q_t_p_datastore.html#a6d3927a7c56a239d283e42fb6a48d6b7" title="returns an iterator to the first column in the JKQTPDatastore">JKQTPDatastore::begin()</a></span> and <span class="tt">JKQTPDatatstore::end()</span> allows to use <span class="tt">JKQTDatastore</span> together with algorithms from the C++ standard template libarary and other templated algorithms based on the same iterator-based interfaces (e.g. in boost).</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md27"></a>
Using Data from one Column to Calculate Another</h2>
<p>After generating columns, as shown above, you can also use the data in these columns to calculate a second column based on the values in the first. You can do this explicitly: </p><div class="fragment"><div class="line"><span class="keywordtype">size_t</span> colLinX=datastore-&gt;<a class="code hl_function" href="class_j_k_q_t_p_datastore.html#a5e33ba3499be747d654639e4987c0b52">addLinearColumn</a>(40, 0, 20, <span class="stringliteral">&quot;x_lin&quot;</span>);</div>
<div class="line"><span class="keywordtype">size_t</span> colFunc1=datastore-&gt;<a class="code hl_function" href="class_j_k_q_t_p_datastore.html#ae057eda96c7b754cd42f4380b429a589">addColumn</a>(datastore-&gt;<a class="code hl_function" href="class_j_k_q_t_p_datastore.html#a0efe38a9912c05618c6422a07a8e0751">getRows</a>(colLinX), <span class="stringliteral">&quot;cos(x_lin)*x_lin/20.0&quot;</span>);</div>
<div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i=0; i&lt;datastore-&gt;<a class="code hl_function" href="class_j_k_q_t_p_datastore.html#a0efe38a9912c05618c6422a07a8e0751">getRows</a>(colLinX); i++) {</div>
<div class="line">    <span class="keywordtype">double</span> x=datastore-&gt;<a class="code hl_function" href="class_j_k_q_t_p_datastore.html#af580d8e0eae7972de1b810b06dfb4a7f">get</a>(colLinX, i);</div>
<div class="line">    datastore-&gt;<a class="code hl_function" href="class_j_k_q_t_p_datastore.html#a4597feb9ac51c2a717e2028ef73e0e8b">set</a>(colFunc1, i, cos(x)*x/20.0);</div>
<div class="line">}</div>
<div class="ttc" id="aclass_j_k_q_t_p_datastore_html_a0efe38a9912c05618c6422a07a8e0751"><div class="ttname"><a href="class_j_k_q_t_p_datastore.html#a0efe38a9912c05618c6422a07a8e0751">JKQTPDatastore::getRows</a></div><div class="ttdeci">size_t getRows(size_t column) const</div><div class="ttdoc">returns the number of rows in the column column</div><div class="ttdef"><b>Definition</b> jkqtpdatastorage.h:2638</div></div>
<div class="ttc" id="aclass_j_k_q_t_p_datastore_html_af580d8e0eae7972de1b810b06dfb4a7f"><div class="ttname"><a href="class_j_k_q_t_p_datastore.html#af580d8e0eae7972de1b810b06dfb4a7f">JKQTPDatastore::get</a></div><div class="ttdeci">double get(size_t column, size_t row) const</div><div class="ttdoc">returns the value at position (column, row). column is the logical column and will be mapped to the a...</div><div class="ttdef"><b>Definition</b> jkqtpdatastorage.h:2675</div></div>
</div><!-- fragment --><p> In this example the function <a class="el" href="class_j_k_q_t_p_datastore.html#af580d8e0eae7972de1b810b06dfb4a7f" title="returns the value at position (column, row). column is the logical column and will be mapped to the a...">JKQTPDatastore::get()</a> is used to retrieve a value from a column and then <a class="el" href="class_j_k_q_t_p_datastore.html#a4597feb9ac51c2a717e2028ef73e0e8b" title="sets the value at position (column, row). column is the logical column and will be mapped to the acco...">JKQTPDatastore::set()</a> is used to store a new value calculated from the read values into another column.</p>
<p>Or use a special function that gets a column with values and a functor f: double-&gt;double as parameters: </p><div class="fragment"><div class="line"><span class="keywordtype">size_t</span> colLinX=datastore-&gt;<a class="code hl_function" href="class_j_k_q_t_p_datastore.html#a5e33ba3499be747d654639e4987c0b52">addLinearColumn</a>(40, 0, 20, <span class="stringliteral">&quot;x_lin&quot;</span>);</div>
<div class="line"><span class="keywordtype">size_t</span> colFunc1=datastore-&gt;<a class="code hl_function" href="class_j_k_q_t_p_datastore.html#a6454e03bf03d417f6670810a0faaccdd">addColumnCalculatedFromColumn</a>(colLinX, [](<span class="keywordtype">double</span> x)-&gt;<span class="keywordtype">double</span> { <span class="keywordflow">return</span> cos(x)*x/20.0; }, <span class="stringliteral">&quot;cos(x_lin)*x_lin/20.0&quot;</span>);</div>
<div class="ttc" id="aclass_j_k_q_t_p_datastore_html_a6454e03bf03d417f6670810a0faaccdd"><div class="ttname"><a href="class_j_k_q_t_p_datastore.html#a6454e03bf03d417f6670810a0faaccdd">JKQTPDatastore::addColumnCalculatedFromColumn</a></div><div class="ttdeci">size_t addColumnCalculatedFromColumn(size_t otherColumn, const std::function&lt; double(double)&gt; &amp;f, const QString &amp;name=QString(&quot;&quot;))</div><div class="ttdef"><b>Definition</b> jkqtpdatastorage.h:1333</div></div>
</div><!-- fragment --><p>Plotting these two columns versus each other </p><div class="fragment"><div class="line">plot.<a class="code hl_function" href="class_j_k_q_t_plotter.html#a63a54c5342d664c35ffb3d532ba26b99">addGraph</a>(linegraph=<span class="keyword">new</span> <a class="code hl_class" href="class_j_k_q_t_p_x_y_line_graph.html">JKQTPXYLineGraph</a>(&amp;plot));</div>
<div class="line">linegraph-&gt;setXColumn(colLinX);</div>
<div class="line">linegraph-&gt;setYColumn(colFunc1);</div>
<div class="line">linegraph-&gt;setTitle(QObject::tr(<span class="stringliteral">&quot;calculated column(s)&quot;</span>));</div>
</div><!-- fragment --><p>results in:</p>
<p><img src="https://raw.githubusercontent.com/jkriege2/JKQtPlotter/master/screenshots/datastore_calccolumns.png" alt="datastore_calccolumns" class="inline"/></p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md28"></a>
2D-Datasets and Images</h2>
<p>There is also a function <span class="tt"><a class="el" href="class_j_k_q_t_p_datastore.html#aaf018b1c809f2c4a0a0f5fbb26bbc933" title="add two columns to the datastore that contains the x- and y- coordinates of a rectangular grid with w...">JKQTPDatastore::addLinearGridColumns</a>(size_t width, double startX, double endX, size_t height, double startY, double endY, const QString &amp;nameX, const QString &amp;nameY)</span> that generate two columns simultaneously that conatin the x- and y-coordinates of the points on a rectangular grid, in a column-major order: </p><div class="fragment"><div class="line">std::pair&lt;size_t,size_t&gt; colLinXY=datastore-&gt;<a class="code hl_function" href="class_j_k_q_t_p_datastore.html#aaf018b1c809f2c4a0a0f5fbb26bbc933">addLinearGridColumns</a>(10, 10, 20, 10, 1.5, 3);</div>
<div class="ttc" id="aclass_j_k_q_t_p_datastore_html_aaf018b1c809f2c4a0a0f5fbb26bbc933"><div class="ttname"><a href="class_j_k_q_t_p_datastore.html#aaf018b1c809f2c4a0a0f5fbb26bbc933">JKQTPDatastore::addLinearGridColumns</a></div><div class="ttdeci">std::pair&lt; size_t, size_t &gt; addLinearGridColumns(size_t width, double startX, double endX, size_t height, double startY, double endY, const QString &amp;nameX=QString(&quot;&quot;), const QString &amp;nameY=QString(&quot;&quot;))</div><div class="ttdoc">add two columns to the datastore that contains the x- and y- coordinates of a rectangular grid with w...</div></div>
</div><!-- fragment --><p> This call will generate these columns with x-values scaling between 10 and 20 (in 10 steps) and y-values between 1.5 and 3 (also in 10 steps): </p><div class="fragment"><div class="line">   x          y</div>
<div class="line">---------------------- </div>
<div class="line">  10,         1.5</div>
<div class="line">  11.1111,    1.5</div>
<div class="line">  12.2222,    1.5</div>
<div class="line">  13.3333,    1.5</div>
<div class="line">  14.4444,    1.5</div>
<div class="line">  15.5556,    1.5</div>
<div class="line">  16.6667,    1.5</div>
<div class="line">  17.7778,    1.5</div>
<div class="line">  18.8889,    1.5</div>
<div class="line">  20,         1.5</div>
<div class="line">  10,         1.66667</div>
<div class="line">  11.1111,    1.66667</div>
<div class="line">  12.2222,    1.66667</div>
<div class="line">  13.3333,    1.66667</div>
<div class="line">  14.4444,    1.66667</div>
<div class="line">  15.5556,    1.66667</div>
<div class="line">  16.6667,    1.66667</div>
<div class="line">  17.7778,    1.66667</div>
<div class="line">  18.8889,    1.66667</div>
<div class="line">  20,         1.66667</div>
<div class="line">  10,         1.83333</div>
<div class="line">  11.1111,    1.83333</div>
<div class="line">  ...         ...</div>
<div class="line">  ...         ...</div>
<div class="line">  18.8889,    3</div>
<div class="line">  20,         3</div>
</div><!-- fragment --><p> Such x-y-coordinate columns are especially usefull when calculating data for an image (plotted by <span class="tt"><a class="el" href="class_j_k_q_t_p_column_math_image.html" title="class to plot an image from an 2-dimensional array of values stored in a column of the datastore">JKQTPColumnMathImage</a></span>), or for a parametrized scatter plot (plotted by <span class="tt"><a class="el" href="class_j_k_q_t_p_x_y_parametrized_scatter_graph.html" title="This implements xy scatter plots (like JKQTPXYScatterGraph), but the color and size of the symbols ma...">JKQTPXYParametrizedScatterGraph</a></span>). To demonstrate this, we can can add another column with 10*10=100 entries and fill it with some values calculated from the the x and y-values in colLinXY: </p><div class="fragment"><div class="line"><span class="keywordtype">size_t</span> imgColumn=datastore-&gt;<a class="code hl_function" href="class_j_k_q_t_p_datastore.html#a3ce797890c214db3794bca76ffefef8e">addImageColumn</a>(10, 10, <span class="stringliteral">&quot;image values&quot;</span>);</div>
<div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i=0; i&lt;datastore-&gt;<a class="code hl_function" href="class_j_k_q_t_p_datastore.html#a0efe38a9912c05618c6422a07a8e0751">getRows</a>(imgColumn); i++) {</div>
<div class="line">    <span class="keywordtype">double</span> x=datastore-&gt;<a class="code hl_function" href="class_j_k_q_t_p_datastore.html#af580d8e0eae7972de1b810b06dfb4a7f">get</a>(colLinXY.first, i);</div>
<div class="line">    <span class="keywordtype">double</span> y=datastore-&gt;<a class="code hl_function" href="class_j_k_q_t_p_datastore.html#af580d8e0eae7972de1b810b06dfb4a7f">get</a>(colLinXY.second, i);</div>
<div class="line">    datastore-&gt;<a class="code hl_function" href="class_j_k_q_t_p_datastore.html#a4597feb9ac51c2a717e2028ef73e0e8b">set</a>(imgColumn, i, cos((x-15.0))/(x-15.0)*cos((y-2.0))/(x-2.0));</div>
<div class="line">}</div>
<div class="ttc" id="aclass_j_k_q_t_p_datastore_html_a3ce797890c214db3794bca76ffefef8e"><div class="ttname"><a href="class_j_k_q_t_p_datastore.html#a3ce797890c214db3794bca76ffefef8e">JKQTPDatastore::addImageColumn</a></div><div class="ttdeci">size_t addImageColumn(size_t width, size_t height, const QString &amp;name=QString(&quot;&quot;))</div><div class="ttdoc">add a new columns with width * height rows to the datastore and return its column ID....</div></div>
</div><!-- fragment --><p> Note that we used <span class="tt">JKQTPDatastore::addImageColumn(width,height,name)</span> here, which generates a column with <span class="tt">width*height</span> entries that are meant to be interpreted as a 2D image with width columns and height rows. This function therefore also save this image size in the column metadata and graphs can later extract this dimension and use it to set them up internally (e.g. <a class="el" href="class_j_k_q_t_p_column_math_image.html#a64d8443502002fe626cbe55799f3c198" title="column containing the displayed image">JKQTPColumnMathImage::setImageColumn()</a> does just that). In the example above we used the simple <a class="el" href="class_j_k_q_t_p_datastore.html#a4597feb9ac51c2a717e2028ef73e0e8b" title="sets the value at position (column, row). column is the logical column and will be mapped to the acco...">JKQTPDatastore::set()</a> store values into our image column. This function treats the column as linearized in row-major order. Alternatively you can also use code like this to access the imageColumn as a real image or matrix: </p><div class="fragment"><div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">int</span> iy=0; iy&lt;10; iy++) {</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ix=0; ix&lt;10; ix++) {</div>
<div class="line">        datastore-&gt;<a class="code hl_function" href="class_j_k_q_t_p_datastore.html#ace87ef8599fa2f71432728626f0e6e55">setPixel</a>(imgColumn, ix, iy, sin(ix*iy));</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="aclass_j_k_q_t_p_datastore_html_ace87ef8599fa2f71432728626f0e6e55"><div class="ttname"><a href="class_j_k_q_t_p_datastore.html#ace87ef8599fa2f71432728626f0e6e55">JKQTPDatastore::setPixel</a></div><div class="ttdeci">void setPixel(size_t column, size_t x, size_t y, double value)</div><div class="ttdoc">returns the value at position (x, y) in the column-th column, which is interpreted with the imageWidt...</div><div class="ttdef"><b>Definition</b> jkqtpdatastorage.h:2800</div></div>
</div><!-- fragment --><p> Drawing this column as an image (using <a class="el" href="class_j_k_q_t_p_column_math_image.html" title="class to plot an image from an 2-dimensional array of values stored in a column of the datastore">JKQTPColumnMathImage</a>) will look like this:</p>
<p><img src="https://raw.githubusercontent.com/jkriege2/JKQtPlotter/master/screenshots/datastore_sineimg.png" alt="datastore_sineimg" class="inline"/></p>
<p>In these examples, the iteration and calculation is written out with an explicit for-loop. <a class="el" href="class_j_k_q_t_p_datastore.html" title="This class manages data columns (with entries of type double ), used by JKQTPlotter/JKQTBasePlotter t...">JKQTPDatastore</a> also offers a shortcut function for this that accepts a functor with the calculation only: </p><div class="fragment"><div class="line">imgColumn=datastore-&gt;<a class="code hl_function" href="class_j_k_q_t_p_datastore.html#a6454e03bf03d417f6670810a0faaccdd">addColumnCalculatedFromColumn</a>(colLinXY.first, colLinXY.second, </div>
<div class="line">                                                   [](<span class="keywordtype">double</span> x, <span class="keywordtype">double</span> y)-&gt;double { </div>
<div class="line">                                                       return cos((x-15.0))/(x-15.0)*cos((y-2.0))/(x-2.0); </div>
<div class="line">                                                   }, </div>
<div class="line">                                                   <span class="stringliteral">&quot;image value&quot;</span>);</div>
</div><!-- fragment --><p>Then you can plot these as a parametrized scatter graph (<span class="tt"><a class="el" href="class_j_k_q_t_p_x_y_parametrized_scatter_graph.html" title="This implements xy scatter plots (like JKQTPXYScatterGraph), but the color and size of the symbols ma...">JKQTPXYParametrizedScatterGraph</a></span>) using: </p><div class="fragment"><div class="line">plot.<a class="code hl_function" href="class_j_k_q_t_plotter.html#a63a54c5342d664c35ffb3d532ba26b99">addGraph</a>(paramscattergraph=<span class="keyword">new</span> <a class="code hl_class" href="class_j_k_q_t_p_x_y_parametrized_scatter_graph.html">JKQTPXYParametrizedScatterGraph</a>(&amp;plot));</div>
<div class="line">paramscattergraph-&gt;setXYColumns(colLinXY);</div>
<div class="line">paramscattergraph-&gt;setColorColumn(imgColumn);</div>
<div class="line">paramscattergraph-&gt;setTitle(QObject::tr(<span class="stringliteral">&quot;parametrized scatter&quot;</span>));</div>
<div class="ttc" id="aclass_j_k_q_t_p_x_y_parametrized_scatter_graph_html"><div class="ttname"><a href="class_j_k_q_t_p_x_y_parametrized_scatter_graph.html">JKQTPXYParametrizedScatterGraph</a></div><div class="ttdoc">This implements xy scatter plots (like JKQTPXYScatterGraph), but the color and size of the symbols ma...</div><div class="ttdef"><b>Definition</b> jkqtpscatter.h:147</div></div>
</div><!-- fragment --><p> ... or alternatively you can only use the column imgColumn in a <span class="tt"><a class="el" href="class_j_k_q_t_p_column_math_image.html" title="class to plot an image from an 2-dimensional array of values stored in a column of the datastore">JKQTPColumnMathImage</a></span> </p><div class="fragment"><div class="line">plot.<a class="code hl_function" href="class_j_k_q_t_plotter.html#a63a54c5342d664c35ffb3d532ba26b99">addGraph</a>(imggraph=<span class="keyword">new</span> <a class="code hl_class" href="class_j_k_q_t_p_column_math_image.html">JKQTPColumnMathImage</a>(&amp;plot));</div>
<div class="line">imggraph-&gt;setImageColumn(imgColumn);</div>
<div class="line">imggraph-&gt;setX(21);</div>
<div class="line">imggraph-&gt;setY(1.5);</div>
<div class="line">imggraph-&gt;setWidth(10);</div>
<div class="line">imggraph-&gt;setHeight(1.5);</div>
<div class="line">imggraph-&gt;setTitle(QObject::tr(<span class="stringliteral">&quot;imgColumn&quot;</span>));</div>
<div class="ttc" id="aclass_j_k_q_t_p_column_math_image_html"><div class="ttname"><a href="class_j_k_q_t_p_column_math_image.html">JKQTPColumnMathImage</a></div><div class="ttdoc">class to plot an image from an 2-dimensional array of values stored in a column of the datastore</div><div class="ttdef"><b>Definition</b> jkqtpimage.h:771</div></div>
</div><!-- fragment --><p> The result will look like this (<span class="tt"><a class="el" href="class_j_k_q_t_p_x_y_parametrized_scatter_graph.html" title="This implements xy scatter plots (like JKQTPXYScatterGraph), but the color and size of the symbols ma...">JKQTPXYParametrizedScatterGraph</a></span> on the left and <span class="tt"><a class="el" href="class_j_k_q_t_p_column_math_image.html" title="class to plot an image from an 2-dimensional array of values stored in a column of the datastore">JKQTPColumnMathImage</a></span> on the right):</p>
<p><img src="https://raw.githubusercontent.com/jkriege2/JKQtPlotter/master/screenshots/datastore_image.png" alt="datastore_image" class="inline"/></p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md29"></a>
Iterator Interface</h1>
<p>Some sections before we discussed a code-fragment </p><div class="fragment"><div class="line"><span class="keywordtype">size_t</span> itXColumn=datastore-&gt;<a class="code hl_function" href="class_j_k_q_t_p_datastore.html#ae057eda96c7b754cd42f4380b429a589">addColumn</a>(50, <span class="stringliteral">&quot;cos curve: x-data&quot;</span>);</div>
<div class="line"><span class="keywordtype">size_t</span> itYColumn=datastore-&gt;<a class="code hl_function" href="class_j_k_q_t_p_datastore.html#ae057eda96c7b754cd42f4380b429a589">addColumn</a>(50, <span class="stringliteral">&quot;cos curve: y-data&quot;</span>);</div>
<div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;datastore-&gt;<a class="code hl_function" href="class_j_k_q_t_p_datastore.html#a0efe38a9912c05618c6422a07a8e0751">getRows</a>(itXColumn); i++) {</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">double</span> x=30.0+i/25.0*M_PI;</div>
<div class="line">    datastore-&gt;<a class="code hl_function" href="class_j_k_q_t_p_datastore.html#a4597feb9ac51c2a717e2028ef73e0e8b">set</a>(itXColumn, i, x);</div>
<div class="line">    datastore-&gt;<a class="code hl_function" href="class_j_k_q_t_p_datastore.html#a4597feb9ac51c2a717e2028ef73e0e8b">set</a>(itYColumn, i, cos(x));</div>
<div class="line">}</div>
</div><!-- fragment --><p> in which an image was calculated pixel-by-pixel with explicit int indices. Alternatively you can also access the columns via C++ iterators: </p><div class="fragment"><div class="line"><span class="keyword">auto</span> itX=datastore-&gt;<a class="code hl_function" href="class_j_k_q_t_p_datastore.html#a6d3927a7c56a239d283e42fb6a48d6b7">begin</a>(colX))</div>
<div class="line"><span class="keyword">auto</span> itY=datastore-&gt;<a class="code hl_function" href="class_j_k_q_t_p_datastore.html#a6d3927a7c56a239d283e42fb6a48d6b7">begin</a>(colY))</div>
<div class="line"><span class="keywordflow">for</span> (; itX!=datastore-&gt;<a class="code hl_function" href="class_j_k_q_t_p_datastore.html#ab67341aad7c2de279970b5a7b5362042">end</a>(colX); ++itX, ++itY) {</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">double</span> x=double(i)/double(Ndata)*8.0*M_PI;</div>
<div class="line">    *itX=x;</div>
<div class="line">    *itY=sin(x);</div>
<div class="line">}</div>
<div class="ttc" id="aclass_j_k_q_t_p_datastore_html_a6d3927a7c56a239d283e42fb6a48d6b7"><div class="ttname"><a href="class_j_k_q_t_p_datastore.html#a6d3927a7c56a239d283e42fb6a48d6b7">JKQTPDatastore::begin</a></div><div class="ttdeci">ColumnIterator begin()</div><div class="ttdoc">returns an iterator to the first column in the JKQTPDatastore</div></div>
<div class="ttc" id="aclass_j_k_q_t_p_datastore_html_ab67341aad7c2de279970b5a7b5362042"><div class="ttname"><a href="class_j_k_q_t_p_datastore.html#ab67341aad7c2de279970b5a7b5362042">JKQTPDatastore::end</a></div><div class="ttdeci">ColumnIterator end()</div><div class="ttdoc">returns an iterator behind the last column in the JKQTPDatastore</div></div>
</div><!-- fragment --><p>All these code fragments result in the same graphs:</p>
<p><img src="https://raw.githubusercontent.com/jkriege2/JKQtPlotter/master/screenshots/datastore_image.png" alt="datastore_image" class="inline"/></p>
<p>You can also use this interface to interface with algorithms e.g. from the C++ standard template library. E.g. if you want to sort the data in a column, you can simply call </p><div class="fragment"><div class="line">std::sort(datastore-&gt;<a class="code hl_function" href="class_j_k_q_t_p_datastore.html#a6d3927a7c56a239d283e42fb6a48d6b7">begin</a>(colY), datastore-&gt;<a class="code hl_function" href="class_j_k_q_t_p_datastore.html#ab67341aad7c2de279970b5a7b5362042">end</a>(colY));</div>
</div><!-- fragment --><p><img src="https://raw.githubusercontent.com/jkriege2/JKQtPlotter/master/screenshots/datastore_image_sorted.png" alt="datastore_image_sorted" class="inline"/></p>
<p>This, together with <span class="tt"><a class="el" href="class_j_k_q_t_p_datastore.html#a1c8222b11049de01139fcd4603ba272c" title="returns a back-inserter iterator (JKQTPColumnBackInserter) to the i -th column in the JKQTPDatastore">JKQTPDatastore::backInserter()</a></span> allows to use <span class="tt">JKQTDatastore</span> together with algorithms from the C++ standard template libarary and other templated algorithms based on the same iterator-based interfaces (e.g. in boost). </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- HTML footer for doxygen 1.9.3-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="example_tutorial_projects.html">Example &amp; Tutorial Projects</a></li>
    <li class="footer">Generated on <span class="timestamp"></span> for JKQTPlotter by <a href="https://www.doxygen.org/index.html">doxygen</a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
