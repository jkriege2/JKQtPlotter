<!-- HTML header for doxygen 1.9.3-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>JKQTPlotter: Tutorial (JKQTPDatastore): 1-Dimensional Group Statistics with JKQTPDatastore</title>
<meta name="description" content="an extensive Qt5+Qt6 Plotter framework (including a feature-richt plotter widget, a speed-optimized, but limited variant and a LaTeX equation renderer!), written fully in C/C++ and without external dependencies">
<meta name="keywords" lang="en-us" content="C++, C++11, Qt, Qt5, Qt6, Plotting, Plot, Chart, Graph, Qt, Widget, C++, Library, Visualization, charting library, plotting library, scientific visualization, data visualization, statistics, statistical methods, statistics library, LaTeX parser, LaTeX renderer, Qt widget, Qt5 widget, Qt6 widget, Qt charts, Qt plots, barchart, violinplot, boxplot, JKQtPlotter, JKQTMathText, JKQTFastPlotter">
<meta name="author" content="$author">
<meta name="copyright" content="(c) 2008-2022 by $author">
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="jkqtplotter_stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo_doxygen.png"/></td>
  <td id="projectalign">
   <div id="projectname">JKQTPlotter<span id="projectnumber">&#160;trunk/v5.0.0</span>
   </div>
   <div id="projectbrief">an extensive Qt5+Qt6 Plotter framework (including a feature-richt plotter widget, a speed-optimized, but limited variant and a LaTeX equation renderer!), written fully in C/C++ and without external dependencies</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<div id="main-nav">
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="topics.html"><span>Topics</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect" class="search-icon" onmouseover="return searchBox.OnSearchSelectShow()" onmouseout="return searchBox.OnSearchSelectHide()"><span class="search-icon-dropdown"></span></span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><div id="MSearchCloseImg" class="close-icon"></div></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- main-nav -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('_j_k_q_t_plotter_basic_j_k_q_t_p_datastore_statistics_grouped_stat.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Tutorial (JKQTPDatastore): 1-Dimensional Group Statistics with JKQTPDatastore </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_examples_2datastore__groupedstat_2_r_e_a_d_m_e"></a></p>
<p>This tutorial project (see <span class="tt">./examples/datastore_groupedstat/</span>) explains several advanced functions of <a class="el" href="class_j_k_q_t_p_datastore.html" title="This class manages data columns (with entries of type double ), used by JKQTPlotter/JKQTBasePlotter t...">JKQTPDatastore</a> in combination with the [<a class="el" href="group__jkqtptools__math__statistics.html">JKQTPlotter Statistics Library</a>] conatined in <a class="el" href="class_j_k_q_t_plotter.html" title="plotter widget for scientific plots (uses JKQTBasePlotter to do the actual drawing)">JKQTPlotter</a>.</p>
<p><em><b>Note</b></em> that there are additional tutorial explaining other aspects of data mangement in <a class="el" href="class_j_k_q_t_p_datastore.html" title="This class manages data columns (with entries of type double ), used by JKQTPlotter/JKQTBasePlotter t...">JKQTPDatastore</a>:</p><ul>
<li><a class="el" href="_j_k_q_t_plotter_basic_j_k_q_t_p_datastore.html">Basic Usage of JKQTPDatastore</a></li>
<li><a class="el" href="_j_k_q_t_plotter_basic_j_k_q_t_p_datastore_iterators.html">Iterator-Based usage of JKQTPDatastore</a></li>
<li><a class="el" href="_j_k_q_t_plotter_basic_j_k_q_t_p_datastore_statistics.html">Advanced 1-Dimensional Statistics with JKQTPDatastore</a></li>
<li><a class="el" href="_j_k_q_t_plotter_basic_j_k_q_t_p_datastore_regression.html">Regression Analysis (with the Statistics Library)</a></li>
<li><a class="el" href="_j_k_q_t_plotter_basic_j_k_q_t_p_datastore_statistics_grouped_stat.html">1-Dimensional Group Statistics with JKQTPDatastore</a></li>
<li><a class="el" href="_j_k_q_t_plotter_basic_j_k_q_t_p_datastore_statistics2_d.html">Advanced 2-Dimensional Statistics with JKQTPDatastore</a></li>
</ul>
<p>The source code of the main application can be found in <a href="https://github.com/jkriege2/JKQtPlotter/tree/master/examples/datastore_groupedstat/datastore_groupedstat.cpp"><span class="tt">datastore_groupedstat.cpp</span></a>. This tutorial cites only parts of this code to demonstrate different ways of working with data for the graphs.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md30"></a>
Barcharts &amp; Boxplots from categorized data</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md31"></a>
Generating a Dataset for Grouped Barcharts</h2>
<p>To demonstrate the grouped statistics, we first have to generate a dataset. The datapoints consist of pairs <span class="tt">&lt;group,value&gt;</span>, where the groups are encoded by the numbers 1,2,3 and in each group, several measurements are taken: </p><div class="fragment"><div class="line"><span class="keywordtype">size_t</span> colBarRawGroup=datastore1-&gt;addColumn(<span class="stringliteral">&quot;barchart, rawdata, group&quot;</span>);</div>
<div class="line"><span class="keywordtype">size_t</span> colBarRawValue=datastore1-&gt;addColumn(<span class="stringliteral">&quot;barchart, rawdata, value&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">//      data for group 1</span></div>
<div class="line">datastore1-&gt;appendToColumns(colBarRawGroup, colBarRawValue, 1, 1.1);</div>
<div class="line">datastore1-&gt;appendToColumns(colBarRawGroup, colBarRawValue, 1, 1.5);</div>
<div class="line">datastore1-&gt;appendToColumns(colBarRawGroup, colBarRawValue, 1, 0.8);</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">//      data for group 2</span></div>
<div class="line">datastore1-&gt;appendToColumns(colBarRawGroup, colBarRawValue, 2, 2.2);</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">//      data for group 3</span></div>
<div class="line">datastore1-&gt;appendToColumns(colBarRawGroup, colBarRawValue, 3, 4.1);</div>
<div class="line"><span class="comment">// ...</span></div>
</div><!-- fragment --><p>Note that the data does not have to be sorted. You can add the dataset in any order!</p>
<p>This dataset can be visualized with a simple scatter plot: </p><div class="fragment"><div class="line"><a class="code hl_class" href="class_j_k_q_t_p_x_y_line_graph.html">JKQTPXYLineGraph</a>* gScatterForBar;</div>
<div class="line">plotbarchart-&gt;addGraph(gScatterForBar=<span class="keyword">new</span> <a class="code hl_class" href="class_j_k_q_t_p_x_y_line_graph.html">JKQTPXYLineGraph</a>(plotbarchart));</div>
<div class="line">gScatterForBar-&gt;<a class="code hl_slot" href="class_j_k_q_t_p_x_y_graph.html#a972ee50c53accadade8880b3bd1110cc">setXYColumns</a>(colBarRawGroup, colBarRawValue);</div>
<div class="line">gScatterForBar-&gt;<a class="code hl_function" href="class_j_k_q_t_p_x_y_line_graph.html#a1202afd954530d0c71c9a745755f7ae0">setDrawLine</a>(<span class="keyword">false</span>);</div>
<div class="line">gScatterForBar-&gt;<a class="code hl_function" href="class_j_k_q_t_p_graph_symbol_style_mixin.html#af278c2bde3ba2b26341d4921748e1923">setSymbolType</a>(<a class="code hl_enumvalue" href="group__jkqtptools__drawing.html#ggacdaaac6baeadbfd3677d4d53ea594b5ba7d1d103c92b5fb6152ddf135315f3449">JKQTPCross</a>);</div>
<div class="line">gScatterForBar-&gt;<a class="code hl_function" href="class_j_k_q_t_p_graph_symbol_style_mixin.html#a7b5bdf1d3b33bcdc2ec82026e6fd55b9">setSymbolSize</a>(5);</div>
<div class="line">gScatterForBar-&gt;<a class="code hl_function" href="class_j_k_q_t_p_graph_symbol_style_mixin.html#a9622acb8fb77c6915877acc6990c31bb">setSymbolColor</a>(<a class="code hl_function" href="group__jkqtpplotter__styling__classes.html#ga4840ec94f56ddc9df4bf5d2c3d0c15ae">QColorWithAlphaF</a>(QColor(<span class="stringliteral">&quot;red&quot;</span>), 0.5));</div>
<div class="ttc" id="aclass_j_k_q_t_p_graph_symbol_style_mixin_html_a7b5bdf1d3b33bcdc2ec82026e6fd55b9"><div class="ttname"><a href="class_j_k_q_t_p_graph_symbol_style_mixin.html#a7b5bdf1d3b33bcdc2ec82026e6fd55b9">JKQTPGraphSymbolStyleMixin::setSymbolSize</a></div><div class="ttdeci">void setSymbolSize(double __value)</div><div class="ttdoc">set the size (=diameter in pt) of the graph symbol (in pt)</div></div>
<div class="ttc" id="aclass_j_k_q_t_p_graph_symbol_style_mixin_html_a9622acb8fb77c6915877acc6990c31bb"><div class="ttname"><a href="class_j_k_q_t_p_graph_symbol_style_mixin.html#a9622acb8fb77c6915877acc6990c31bb">JKQTPGraphSymbolStyleMixin::setSymbolColor</a></div><div class="ttdeci">void setSymbolColor(const QColor &amp;__value)</div><div class="ttdoc">set the color of the graph symbols</div></div>
<div class="ttc" id="aclass_j_k_q_t_p_graph_symbol_style_mixin_html_af278c2bde3ba2b26341d4921748e1923"><div class="ttname"><a href="class_j_k_q_t_p_graph_symbol_style_mixin.html#af278c2bde3ba2b26341d4921748e1923">JKQTPGraphSymbolStyleMixin::setSymbolType</a></div><div class="ttdeci">void setSymbolType(JKQTPGraphSymbols __value)</div><div class="ttdoc">set the type of the graph symbol</div></div>
<div class="ttc" id="aclass_j_k_q_t_p_x_y_graph_html_a972ee50c53accadade8880b3bd1110cc"><div class="ttname"><a href="class_j_k_q_t_p_x_y_graph.html#a972ee50c53accadade8880b3bd1110cc">JKQTPXYGraph::setXYColumns</a></div><div class="ttdeci">void setXYColumns(size_t xCol, size_t yCol)</div><div class="ttdoc">sets xColumn and yColumn at the same time</div></div>
<div class="ttc" id="aclass_j_k_q_t_p_x_y_line_graph_html"><div class="ttname"><a href="class_j_k_q_t_p_x_y_line_graph.html">JKQTPXYLineGraph</a></div><div class="ttdoc">This implements xy line plots. This also alows to draw symbols at the data points.</div><div class="ttdef"><b>Definition</b> jkqtplines.h:61</div></div>
<div class="ttc" id="aclass_j_k_q_t_p_x_y_line_graph_html_a1202afd954530d0c71c9a745755f7ae0"><div class="ttname"><a href="class_j_k_q_t_p_x_y_line_graph.html#a1202afd954530d0c71c9a745755f7ae0">JKQTPXYLineGraph::setDrawLine</a></div><div class="ttdeci">void setDrawLine(bool __value)</div><div class="ttdoc">indicates whether to draw a line or not</div></div>
<div class="ttc" id="agroup__jkqtpplotter__styling__classes_html_ga4840ec94f56ddc9df4bf5d2c3d0c15ae"><div class="ttname"><a href="group__jkqtpplotter__styling__classes.html#ga4840ec94f56ddc9df4bf5d2c3d0c15ae">QColorWithAlphaF</a></div><div class="ttdeci">QColor QColorWithAlphaF(const QColor &amp;color, qreal alphaF)</div><div class="ttdoc">construct a QColor, based on the given color, but with alpha set to the specified value alphaF</div><div class="ttdef"><b>Definition</b> jkqtptools.h:364</div></div>
<div class="ttc" id="agroup__jkqtptools__drawing_html_ggacdaaac6baeadbfd3677d4d53ea594b5ba7d1d103c92b5fb6152ddf135315f3449"><div class="ttname"><a href="group__jkqtptools__drawing.html#ggacdaaac6baeadbfd3677d4d53ea594b5ba7d1d103c92b5fb6152ddf135315f3449">JKQTPCross</a></div><div class="ttdeci">@ JKQTPCross</div><div class="ttdoc">a X cross</div><div class="ttdef"><b>Definition</b> jkqtpdrawingtools.h:146</div></div>
</div><!-- fragment --><p>The resulting plot looks like this:</p>
<p><img src="https://raw.githubusercontent.com/jkriege2/JKQtPlotter/master/screenshots/datastore_groupedstat_barchartrawdata.png" alt="datastore_groupedstat_barchartrawdata" class="inline"/></p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md32"></a>
Calculating Grouped Statistics for a Barchart</h2>
<p>Now we want to draw a barchart for every group, which indicates the average in each group. This is done using methods from the statistics library. First we need to group the data using <span class="tt"><a class="el" href="group__jkqtptools__math__statistics__grouped.html#gad8a5870f70c3e43674f114b30de9ade7" title="groups data from an input range inFirstCat / inFirstValue ... inLastCat / outFirstCat representing pa...">jkqtpstatGroupData()</a></span>, which assembles the data points in each group groupeddataBar </p><div class="fragment"><div class="line">std::map&lt;double, std::vector&lt;double&gt; &gt; groupeddataBar;</div>
<div class="line"><a class="code hl_function" href="group__jkqtptools__math__statistics__grouped.html#gad8a5870f70c3e43674f114b30de9ade7">jkqtpstatGroupData</a>(datastore1-&gt;begin(colBarRawGroup), datastore1-&gt;end(colBarRawGroup),</div>
<div class="line">                   datastore1-&gt;begin(colBarRawValue), datastore1-&gt;end(colBarRawValue),</div>
<div class="line">                   groupeddataBar);</div>
<div class="ttc" id="agroup__jkqtptools__math__statistics__grouped_html_gad8a5870f70c3e43674f114b30de9ade7"><div class="ttname"><a href="group__jkqtptools__math__statistics__grouped.html#gad8a5870f70c3e43674f114b30de9ade7">jkqtpstatGroupData</a></div><div class="ttdeci">void jkqtpstatGroupData(InputCatIt inFirstCat, InputCatIt inLastCat, InputValueIt inFirstValue, InputValueIt inLastValue, std::map&lt; double, std::vector&lt; double &gt; &gt; &amp;groupeddata, JKQTPStatGroupDefinitionFunctor1D groupDefFunc=&amp;jkqtpstatGroupingIdentity1D)</div><div class="ttdoc">groups data from an input range inFirstCat / inFirstValue ... inLastCat / outFirstCat representing pa...</div><div class="ttdef"><b>Definition</b> jkqtpstatgrouped.h:108</div></div>
</div><!-- fragment --><p> Now we can calculate the statistics for each group separately: Data is collected in new columns <span class="tt">colBarGroup</span>, <span class="tt">colBarAverage</span> and <span class="tt">colBarStdDev</span>. The statistics is then calculated by simply iterating over <span class="tt">groupeddataBar</span> and calling functions like <span class="tt"><a class="el" href="group__jkqtptools__math__statistics__basic.html#ga6a829fb0253c9cbaf541e23c45292808" title="calculates the average of a given data range first ... last">jkqtpstatAverage()</a></span> for each group: </p><div class="fragment"><div class="line"><span class="keywordtype">size_t</span> colBarGroup=datastore1-&gt;addColumn(<span class="stringliteral">&quot;barchart, group&quot;</span>);</div>
<div class="line"><span class="keywordtype">size_t</span> colBarAverage=datastore1-&gt;addColumn(<span class="stringliteral">&quot;barchart, group-average&quot;</span>);</div>
<div class="line"><span class="keywordtype">size_t</span> colBarStdDev=datastore1-&gt;addColumn(<span class="stringliteral">&quot;barchart, group-stddev&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">for</span> (<span class="keyword">auto</span> it=groupeddataBar.begin(); it!=groupeddataBar.end(); ++it) {</div>
<div class="line">    datastore1-&gt;appendToColumn(colBarGroup, it-&gt;first);</div>
<div class="line">    datastore1-&gt;appendToColumn(colBarAverage, <a class="code hl_function" href="group__jkqtptools__math__statistics__basic.html#ga6a829fb0253c9cbaf541e23c45292808">jkqtpstatAverage</a>(it-&gt;second.begin(), it-&gt;second.end()));</div>
<div class="line">    datastore1-&gt;appendToColumn(colBarStdDev, <a class="code hl_function" href="group__jkqtptools__math__statistics__basic.html#ga0cbd4d4f762fe7c05fa143e643988c21">jkqtpstatStdDev</a>(it-&gt;second.begin(), it-&gt;second.end()));</div>
<div class="line">}</div>
<div class="ttc" id="agroup__jkqtptools__math__statistics__basic_html_ga0cbd4d4f762fe7c05fa143e643988c21"><div class="ttname"><a href="group__jkqtptools__math__statistics__basic.html#ga0cbd4d4f762fe7c05fa143e643988c21">jkqtpstatStdDev</a></div><div class="ttdeci">double jkqtpstatStdDev(InputIt first, InputIt last, double *averageOut=nullptr, size_t *Noutput=nullptr)</div><div class="ttdoc">calculates the standard deviation  of a given data range first ... last</div><div class="ttdef"><b>Definition</b> jkqtpstatbasics.h:515</div></div>
<div class="ttc" id="agroup__jkqtptools__math__statistics__basic_html_ga6a829fb0253c9cbaf541e23c45292808"><div class="ttname"><a href="group__jkqtptools__math__statistics__basic.html#ga6a829fb0253c9cbaf541e23c45292808">jkqtpstatAverage</a></div><div class="ttdeci">double jkqtpstatAverage(InputIt first, InputIt last, size_t *Noutput=nullptr)</div><div class="ttdoc">calculates the average of a given data range first ... last</div><div class="ttdef"><b>Definition</b> jkqtpstatbasics.h:62</div></div>
</div><!-- fragment --><p>Finally the calculated groups are drawn: </p><div class="fragment"><div class="line"><a class="code hl_class" href="class_j_k_q_t_p_bar_vertical_error_graph.html">JKQTPBarVerticalErrorGraph</a>* gBar;</div>
<div class="line">plotbarchart-&gt;addGraph(gBar=<span class="keyword">new</span> <a class="code hl_class" href="class_j_k_q_t_p_bar_vertical_error_graph.html">JKQTPBarVerticalErrorGraph</a>(plotbarchart));</div>
<div class="line">gBar-&gt;<a class="code hl_slot" href="class_j_k_q_t_p_x_y_graph.html#a972ee50c53accadade8880b3bd1110cc">setXYColumns</a>(colBarGroup, colBarAverage);</div>
<div class="line">gBar-&gt;<a class="code hl_function" href="class_j_k_q_t_p_y_graph_error_data.html#a52350a8da0cbce7a98e6da445ad28b11">setYErrorColumn</a>(<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(colBarStdDev));</div>
<div class="ttc" id="aclass_j_k_q_t_p_bar_vertical_error_graph_html"><div class="ttname"><a href="class_j_k_q_t_p_bar_vertical_error_graph.html">JKQTPBarVerticalErrorGraph</a></div><div class="ttdoc">This implements a vertical bar graph with bars between  and  and error indicator.</div><div class="ttdef"><b>Definition</b> jkqtpbarchart.h:90</div></div>
<div class="ttc" id="aclass_j_k_q_t_p_y_graph_error_data_html_a52350a8da0cbce7a98e6da445ad28b11"><div class="ttname"><a href="class_j_k_q_t_p_y_graph_error_data.html#a52350a8da0cbce7a98e6da445ad28b11">JKQTPYGraphErrorData::setYErrorColumn</a></div><div class="ttdeci">void setYErrorColumn(int __value)</div><div class="ttdoc">the column that contains the error of the x-component of the datapoints</div></div>
</div><!-- fragment --><p>The resulting plot looks like this:</p>
<p><img src="https://raw.githubusercontent.com/jkriege2/JKQtPlotter/master/screenshots/datastore_groupedstat_barchart.png" alt="datastore_groupedstat_barchart" class="inline"/></p>
<p>In order to safe yo the typing of the code above, shortcuts in the form of adaptors exist: </p><div class="fragment"><div class="line"><a class="code hl_function" href="group__jkqtptools__math__statistics__adaptors.html#gaadc7808115cc0d4741c1a6f8bbc813ba">jkqtpstatAddYErrorBarGraph</a>(plotbarchart-&gt;getPlotter(),</div>
<div class="line">                           datastore1-&gt;begin(colBarRawGroup), datastore1-&gt;end(colBarRawGroup),</div>
<div class="line">                           datastore1-&gt;begin(colBarRawValue), datastore1-&gt;end(colBarRawValue));</div>
<div class="ttc" id="agroup__jkqtptools__math__statistics__adaptors_html_gaadc7808115cc0d4741c1a6f8bbc813ba"><div class="ttname"><a href="group__jkqtptools__math__statistics__adaptors.html#gaadc7808115cc0d4741c1a6f8bbc813ba">jkqtpstatAddYErrorBarGraph</a></div><div class="ttdeci">JKQTPBarVerticalErrorGraph * jkqtpstatAddYErrorBarGraph(JKQTBasePlotter *plotter, InputCatIt inFirstCat_X, InputCatIt inLastCat_X, InputValueIt inFirstValue_Y, InputValueIt inLastValue_Y, JKQTPStatGroupDefinitionFunctor1D groupDefFunc=&amp;jkqtpstatGroupingIdentity1D, const QString &amp;columnBaseName=QString(&quot;grouped data&quot;))</div><div class="ttdoc">create a JKQTPBarVerticalErrorGraph with y-direction error bars, calculated from average +/- stddev o...</div><div class="ttdef"><b>Definition</b> jkqtpstatisticsadaptors.h:2435</div></div>
</div><!-- fragment --><p> Also other flavors exist that generate different graphs (see the <a class="el" href="class_j_k_q_t_plotter.html" title="plotter widget for scientific plots (uses JKQTBasePlotter to do the actual drawing)">JKQTPlotter</a> documentation):</p><ul>
<li><span class="tt"><a class="el" href="group__jkqtptools__math__statistics__adaptors.html#ga6a6bd4e099660655902e59dedcf82139" title="create a JKQTPXYLineErrorGraph with y-direction error bars, calculated from average +/- stddev of gro...">jkqtpstatAddYErrorLineGraph()</a></span> / <span class="tt"><a class="el" href="group__jkqtptools__math__statistics__adaptors.html#gaefd517437046308a617da8e44226e148" title="create a JKQTPXYLineErrorGraph with x-direction error bars, calculated from average +/- stddev of gro...">jkqtpstatAddXErrorLineGraph()</a></span></li>
<li><span class="tt"><a class="el" href="group__jkqtptools__math__statistics__adaptors.html#gaadc7808115cc0d4741c1a6f8bbc813ba" title="create a JKQTPBarVerticalErrorGraph with y-direction error bars, calculated from average +/- stddev o...">jkqtpstatAddYErrorBarGraph()</a></span> / <span class="tt"><a class="el" href="group__jkqtptools__math__statistics__adaptors.html#gaee5a27ec10b73a30d522c618431865b2" title="create a JKQTPBarHorizontalErrorGraph with x-direction error bars, calculated from average +/- stddev...">jkqtpstatAddXErrorBarGraph()</a></span></li>
<li><span class="tt"><a class="el" href="group__jkqtptools__math__statistics__adaptors.html#gabaefd955d37d0823152c17fbf15a5d23" title="create a JKQTPImpulsesVerticalErrorGraph with y-direction error bars, calculated from average +/- std...">jkqtpstatAddYErrorImpulsesGraph()</a></span> / <span class="tt"><a class="el" href="group__jkqtptools__math__statistics__adaptors.html#ga15361293de0c2094fff0a37726cea73a" title="create a JKQTPImpulsesHorizontalErrorGraph with x-direction error bars, calculated from average +/- s...">jkqtpstatAddXErrorImpulsesGraph()</a></span></li>
<li><span class="tt"><a class="el" href="group__jkqtptools__math__statistics__adaptors.html#ga7656557490f07e8a33137e5a8e9064a2" title="create a JKQTPXYParametrizedErrorScatterGraph with y-direction error bars, calculated from average +/...">jkqtpstatAddYErrorParametrizedScatterGraph()</a></span> / <span class="tt"><a class="el" href="group__jkqtptools__math__statistics__adaptors.html#ga7114be0128e8735168346a5a8cdccbd4" title="create a JKQTPXYParametrizedErrorScatterGraph with x-direction error bars, calculated from average +/...">jkqtpstatAddXErrorParametrizedScatterGraph()</a></span></li>
<li><span class="tt"><a class="el" href="group__jkqtptools__math__statistics__adaptors.html#ga2b33aa5d01b1348846c7633ddd2523a7" title="create a JKQTPFilledCurveYErrorGraph with y-direction error bars, calculated from average +/- stddev ...">jkqtpstatAddYErrorFilledCurveGraph()</a></span> / <span class="tt"><a class="el" href="group__jkqtptools__math__statistics__adaptors.html#gab76d321d6d256d3979e14055cbeb71ed" title="create a JKQTPFilledCurveXErrorGraph with x-direction error bars, calculated from average +/- stddev ...">jkqtpstatAddXErrorFilledCurveGraph()</a></span></li>
<li><span class="tt"><a class="el" href="group__jkqtptools__math__statistics__adaptors.html#gaf4fb761320377e7b02ffc10b090acc9b" title="create a plot with y-direction error bars, calculated from average +/- stddev of groups in the input ...">jkqtpstatAddYErrorGraph()</a></span> / <span class="tt"><a class="el" href="group__jkqtptools__math__statistics__adaptors.html#ga3e9864505e5214b5bd420f039dc494a5" title="create a plot with x-direction error bars, calculated from average +/- stddev of groups in the input ...">jkqtpstatAddXErrorGraph()</a></span></li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md33"></a>
Calculating Grouped Statistics for a Boxplot</h2>
<p>With the methods above we can also calculate more advanced statistics, like e.g. boxplots: </p><div class="fragment"><div class="line"><span class="keywordtype">size_t</span> colBarMedian=datastore1-&gt;addColumn(<span class="stringliteral">&quot;barchart, group-median&quot;</span>);</div>
<div class="line"><span class="keywordtype">size_t</span> colBarMin=datastore1-&gt;addColumn(<span class="stringliteral">&quot;barchart, group-min&quot;</span>);</div>
<div class="line"><span class="keywordtype">size_t</span> colBarMax=datastore1-&gt;addColumn(<span class="stringliteral">&quot;barchart, group-max&quot;</span>);</div>
<div class="line"><span class="keywordtype">size_t</span> colBarQ25=datastore1-&gt;addColumn(<span class="stringliteral">&quot;barchart, group-Q25&quot;</span>);</div>
<div class="line"><span class="keywordtype">size_t</span> colBarQ75=datastore1-&gt;addColumn(<span class="stringliteral">&quot;barchart, group-Q75&quot;</span>);</div>
<div class="line"><span class="keywordflow">for</span> (<span class="keyword">auto</span> it=groupeddataBar.begin(); it!=groupeddataBar.end(); ++it) {</div>
<div class="line">    datastore1-&gt;appendToColumn(colBarMedian, <a class="code hl_function" href="group__jkqtptools__math__statistics__basic.html#ga5aa5e5dc787e5c891ae7d1eccd697003">jkqtpstatMedian</a>(it-&gt;second.begin(), it-&gt;second.end()));</div>
<div class="line">    datastore1-&gt;appendToColumn(colBarMin, <a class="code hl_function" href="group__jkqtptools__math__statistics__basic.html#ga964efee196e2d587b30037421cdda22a">jkqtpstatMinimum</a>(it-&gt;second.begin(), it-&gt;second.end()));</div>
<div class="line">    datastore1-&gt;appendToColumn(colBarMax, <a class="code hl_function" href="group__jkqtptools__math__statistics__basic.html#ga88fd1f99cd6703268c3065d69ba6b65d">jkqtpstatMaximum</a>(it-&gt;second.begin(), it-&gt;second.end()));</div>
<div class="line">    datastore1-&gt;appendToColumn(colBarQ25, <a class="code hl_function" href="group__jkqtptools__math__statistics__basic.html#ga6bad0f90e0326380c13b466115285a8f">jkqtpstatQuantile</a>(it-&gt;second.begin(), it-&gt;second.end(), 0.25));</div>
<div class="line">    datastore1-&gt;appendToColumn(colBarQ75, <a class="code hl_function" href="group__jkqtptools__math__statistics__basic.html#ga6bad0f90e0326380c13b466115285a8f">jkqtpstatQuantile</a>(it-&gt;second.begin(), it-&gt;second.end(), 0.75));</div>
<div class="line">}</div>
<div class="ttc" id="agroup__jkqtptools__math__statistics__basic_html_ga5aa5e5dc787e5c891ae7d1eccd697003"><div class="ttname"><a href="group__jkqtptools__math__statistics__basic.html#ga5aa5e5dc787e5c891ae7d1eccd697003">jkqtpstatMedian</a></div><div class="ttdeci">double jkqtpstatMedian(InputIt first, InputIt last, size_t *Noutput=nullptr)</div><div class="ttdoc">calculates the median of a given data range first ... last</div><div class="ttdef"><b>Definition</b> jkqtpstatbasics.h:868</div></div>
<div class="ttc" id="agroup__jkqtptools__math__statistics__basic_html_ga6bad0f90e0326380c13b466115285a8f"><div class="ttname"><a href="group__jkqtptools__math__statistics__basic.html#ga6bad0f90e0326380c13b466115285a8f">jkqtpstatQuantile</a></div><div class="ttdeci">double jkqtpstatQuantile(InputIt first, InputIt last, double quantile, size_t *Noutput=nullptr)</div><div class="ttdoc">calculates the quantile -th quantile of a given data range first ... last</div><div class="ttdef"><b>Definition</b> jkqtpstatbasics.h:1170</div></div>
<div class="ttc" id="agroup__jkqtptools__math__statistics__basic_html_ga88fd1f99cd6703268c3065d69ba6b65d"><div class="ttname"><a href="group__jkqtptools__math__statistics__basic.html#ga88fd1f99cd6703268c3065d69ba6b65d">jkqtpstatMaximum</a></div><div class="ttdeci">double jkqtpstatMaximum(InputIt first, InputIt last, InputIt *maxPos=nullptr, size_t *Noutput=nullptr)</div><div class="ttdoc">calculates the maximum value in the given data range first ... last</div><div class="ttdef"><b>Definition</b> jkqtpstatbasics.h:265</div></div>
<div class="ttc" id="agroup__jkqtptools__math__statistics__basic_html_ga964efee196e2d587b30037421cdda22a"><div class="ttname"><a href="group__jkqtptools__math__statistics__basic.html#ga964efee196e2d587b30037421cdda22a">jkqtpstatMinimum</a></div><div class="ttdeci">double jkqtpstatMinimum(InputIt first, InputIt last, InputIt *minPos=nullptr, size_t *Noutput=nullptr)</div><div class="ttdoc">calculates the minimum value in the given data range first ... last</div><div class="ttdef"><b>Definition</b> jkqtpstatbasics.h:223</div></div>
</div><!-- fragment --><p> The result can be plotted using <a class="el" href="class_j_k_q_t_p_boxplot_vertical_graph.html" title="This implements vertical boxplots, optionally also a notched boxplot.">JKQTPBoxplotVerticalGraph</a>, which receives a column for each value class of the final plot: </p><div class="fragment"><div class="line"><a class="code hl_class" href="class_j_k_q_t_p_boxplot_vertical_graph.html">JKQTPBoxplotVerticalGraph</a>* gBoxplot;</div>
<div class="line">plotboxplot-&gt;addGraph(gBoxplot=<span class="keyword">new</span> <a class="code hl_class" href="class_j_k_q_t_p_boxplot_vertical_graph.html">JKQTPBoxplotVerticalGraph</a>(plotboxplot));</div>
<div class="line">gBoxplot-&gt;<a class="code hl_slot" href="class_j_k_q_t_p_boxplot_graph_base.html#a4ca217e8972b720510c6edfd16227f82">setPositionColumn</a>(colBarGroup);</div>
<div class="line">gBoxplot-&gt;<a class="code hl_slot" href="class_j_k_q_t_p_boxplot_graph_base.html#a3bc9d05fc2319e8317d280bce25dfde7">setMinColumn</a>(colBarMin);</div>
<div class="line">gBoxplot-&gt;<a class="code hl_slot" href="class_j_k_q_t_p_boxplot_graph_base.html#a8fe9506bc7b7f93b32a73d32e5181d2b">setMaxColumn</a>(colBarMax);</div>
<div class="line">gBoxplot-&gt;<a class="code hl_slot" href="class_j_k_q_t_p_boxplot_graph_base.html#a6e60fa3e75286d7e8777b2414a56778c">setMedianColumn</a>(colBarMedian);</div>
<div class="line">gBoxplot-&gt;<a class="code hl_slot" href="class_j_k_q_t_p_boxplot_graph_base.html#a23fad13fb8adb1062ea5ca58ddc34885">setPercentile25Column</a>(colBarQ25);</div>
<div class="line">gBoxplot-&gt;<a class="code hl_slot" href="class_j_k_q_t_p_boxplot_graph_base.html#ab36ff1a3f31d3932894d1cd75efad56b">setPercentile75Column</a>(colBarQ75);</div>
<div class="ttc" id="aclass_j_k_q_t_p_boxplot_graph_base_html_a23fad13fb8adb1062ea5ca58ddc34885"><div class="ttname"><a href="class_j_k_q_t_p_boxplot_graph_base.html#a23fad13fb8adb1062ea5ca58ddc34885">JKQTPBoxplotGraphBase::setPercentile25Column</a></div><div class="ttdeci">void setPercentile25Column(int __value)</div><div class="ttdoc">the column that contains the 25% percentile-component of the datapoints</div></div>
<div class="ttc" id="aclass_j_k_q_t_p_boxplot_graph_base_html_a3bc9d05fc2319e8317d280bce25dfde7"><div class="ttname"><a href="class_j_k_q_t_p_boxplot_graph_base.html#a3bc9d05fc2319e8317d280bce25dfde7">JKQTPBoxplotGraphBase::setMinColumn</a></div><div class="ttdeci">void setMinColumn(int __value)</div><div class="ttdoc">the column that contains the minimum-component of the datapoints</div></div>
<div class="ttc" id="aclass_j_k_q_t_p_boxplot_graph_base_html_a4ca217e8972b720510c6edfd16227f82"><div class="ttname"><a href="class_j_k_q_t_p_boxplot_graph_base.html#a4ca217e8972b720510c6edfd16227f82">JKQTPBoxplotGraphBase::setPositionColumn</a></div><div class="ttdeci">void setPositionColumn(int __value)</div><div class="ttdoc">the column that contains the x-component of the datapoints</div></div>
<div class="ttc" id="aclass_j_k_q_t_p_boxplot_graph_base_html_a6e60fa3e75286d7e8777b2414a56778c"><div class="ttname"><a href="class_j_k_q_t_p_boxplot_graph_base.html#a6e60fa3e75286d7e8777b2414a56778c">JKQTPBoxplotGraphBase::setMedianColumn</a></div><div class="ttdeci">void setMedianColumn(int __value)</div><div class="ttdoc">the column that contains the median-component of the datapoints</div></div>
<div class="ttc" id="aclass_j_k_q_t_p_boxplot_graph_base_html_a8fe9506bc7b7f93b32a73d32e5181d2b"><div class="ttname"><a href="class_j_k_q_t_p_boxplot_graph_base.html#a8fe9506bc7b7f93b32a73d32e5181d2b">JKQTPBoxplotGraphBase::setMaxColumn</a></div><div class="ttdeci">void setMaxColumn(int __value)</div><div class="ttdoc">the column that contains the maximum-component of the datapoints</div></div>
<div class="ttc" id="aclass_j_k_q_t_p_boxplot_graph_base_html_ab36ff1a3f31d3932894d1cd75efad56b"><div class="ttname"><a href="class_j_k_q_t_p_boxplot_graph_base.html#ab36ff1a3f31d3932894d1cd75efad56b">JKQTPBoxplotGraphBase::setPercentile75Column</a></div><div class="ttdeci">void setPercentile75Column(int __value)</div><div class="ttdoc">the column that contains the 75% percentile-component of the datapoints</div></div>
<div class="ttc" id="aclass_j_k_q_t_p_boxplot_vertical_graph_html"><div class="ttname"><a href="class_j_k_q_t_p_boxplot_vertical_graph.html">JKQTPBoxplotVerticalGraph</a></div><div class="ttdoc">This implements vertical boxplots, optionally also a notched boxplot.</div><div class="ttdef"><b>Definition</b> jkqtpboxplot.h:102</div></div>
</div><!-- fragment --><p>The resulting plot looks like this:</p>
<p><img src="https://raw.githubusercontent.com/jkriege2/JKQtPlotter/master/screenshots/datastore_groupedstat_boxplot.png" alt="datastore_groupedstat_boxplot" class="inline"/></p>
<p>In order to safe yo the typing of the code above, shortcuts in the form of adaptors exist: </p><div class="fragment"><div class="line"><a class="code hl_function" href="group__jkqtptools__math__statistics__adaptors.html#ga5c3c190fb942cc14bdccbee7e5c79ba9">jkqtpstatAddHBoxplotsAndOutliers</a>(plotboxplot-&gt;getPlotter(),</div>
<div class="line">                                datastore1-&gt;begin(colBarRawGroup), datastore1-&gt;end(colBarRawGroup),</div>
<div class="line">                                datastore1-&gt;begin(colBarRawValue), datastore1-&gt;end(colBarRawValue));</div>
<div class="ttc" id="agroup__jkqtptools__math__statistics__adaptors_html_ga5c3c190fb942cc14bdccbee7e5c79ba9"><div class="ttname"><a href="group__jkqtptools__math__statistics__adaptors.html#ga5c3c190fb942cc14bdccbee7e5c79ba9">jkqtpstatAddHBoxplotsAndOutliers</a></div><div class="ttdeci">std::pair&lt; JKQTPBoxplotHorizontalGraph *, JKQTPXYLineGraph * &gt; jkqtpstatAddHBoxplotsAndOutliers(JKQTBasePlotter *plotter, InputCatIt inFirstCat_Y, InputCatIt inLastCat_Y, InputValueIt inFirstValue_X, InputValueIt inLastValue_X, double quantile1Spec=0.25, double quantile2Spec=0.75, double minimumQuantile=0.03, double maximumQuantile=0.97, JKQTPStatGroupDefinitionFunctor1D groupDefFunc=&amp;jkqtpstatGroupingIdentity1D, const QString &amp;columnBaseName=QString(&quot;grouped boxplot data&quot;))</div><div class="ttdoc">create vertical boxplots of type JKQTPBoxplotHorizontalGraph, from the 5-value-summary of groups in t...</div><div class="ttdef"><b>Definition</b> jkqtpstatisticsadaptors.h:3014</div></div>
</div><!-- fragment --><p> Also other flavors exist that generate different graphs (see the <a class="el" href="class_j_k_q_t_plotter.html" title="plotter widget for scientific plots (uses JKQTBasePlotter to do the actual drawing)">JKQTPlotter</a> documentation):</p><ul>
<li><span class="tt"><a class="el" href="group__jkqtptools__math__statistics__adaptors.html#ga24ecdc76fdcbecf946828ee818f8a83a" title="create vertical boxplots of type JKQTPBoxplotVerticalGraph, from the 5-value-summary of groups in the...">jkqtpstatAddVBoxplotsAndOutliers()</a></span> / <span class="tt"><a class="el" href="group__jkqtptools__math__statistics__adaptors.html#ga5c3c190fb942cc14bdccbee7e5c79ba9" title="create vertical boxplots of type JKQTPBoxplotHorizontalGraph, from the 5-value-summary of groups in t...">jkqtpstatAddHBoxplotsAndOutliers()</a></span></li>
<li><span class="tt"><a class="el" href="group__jkqtptools__math__statistics__adaptors.html#gac3ba7bfc7c4b87adce3a8c6f478196cb" title="create vertical boxplots of type JKQTPBoxplotVerticalGraph, from the 5-value-summary of groups in the...">jkqtpstatVAddBoxplots()</a></span> / <span class="tt">jkqtpstatHAddBoxplots()</span></li>
<li><span class="tt"><a class="el" href="group__jkqtptools__math__statistics__adaptors.html#gaffc04b2246a0cadf14a13c2079181105" title="create horizontal boxplots of type TGraph, from the 5-value-summary of groups in the input data">jkqtpstatAddBoxplots()</a></span></li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md34"></a>
(Scatter-)Graphs with X/Y-errors from Categorized Data</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md35"></a>
Dataset for XY Scatter Graphs</h2>
<p>First we generate a second dataset, which is going to be used for a scaterplot. The datapoints consist of pairs <span class="tt">&lt;x,y&gt;</span>, that are based on a parabula with random deviations, both in x- and y-direction: </p><div class="fragment"><div class="line"><span class="keywordtype">size_t</span> colScatterRawX=datastore1-&gt;addColumn(<span class="stringliteral">&quot;scatterplot, rawdata, x&quot;</span>);</div>
<div class="line"><span class="keywordtype">size_t</span> colScatterRawY=datastore1-&gt;addColumn(<span class="stringliteral">&quot;scatterplot, rawdata, y&quot;</span>);</div>
<div class="line">std::random_device rd; <span class="comment">// random number generators:</span></div>
<div class="line">std::mt19937 gen{rd()};</div>
<div class="line">std::normal_distribution&lt;&gt; d1{0,0.5};</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">size_t</span> N=100;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">double</span> xmax=3.5;</div>
<div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i=0; i&lt;N; i++) {</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">double</span> x=(<span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(i)-<span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(N)/2.0)*xmax/(<span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(N)/2.0);</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">double</span> y=<a class="code hl_function" href="group__jkqtptools__math__basic.html#gacb0b84ffd616c54365266f907cedf400">jkqtp_sqr</a>(x)+2.0;</div>
<div class="line">    datastore1-&gt;appendToColumns(colScatterRawX, colScatterRawY, x+d1(gen), y+d1(gen));</div>
<div class="line">}</div>
<div class="ttc" id="agroup__jkqtptools__math__basic_html_gacb0b84ffd616c54365266f907cedf400"><div class="ttname"><a href="group__jkqtptools__math__basic.html#gacb0b84ffd616c54365266f907cedf400">jkqtp_sqr</a></div><div class="ttdeci">T jkqtp_sqr(const T &amp;v)</div><div class="ttdoc">returns the quare of the value v, i.e. v*v</div><div class="ttdef"><b>Definition</b> jkqtpmathtools.h:327</div></div>
</div><!-- fragment --><p>This dataset can be visualized: </p><div class="fragment"><div class="line"><a class="code hl_class" href="class_j_k_q_t_p_x_y_parametrized_scatter_graph.html">JKQTPXYParametrizedScatterGraph</a>* gScatterRaw;</div>
<div class="line">plotscattererrors-&gt;addGraph(gScatterRaw=<span class="keyword">new</span> <a class="code hl_class" href="class_j_k_q_t_p_x_y_parametrized_scatter_graph.html">JKQTPXYParametrizedScatterGraph</a>(plotscattererrors));</div>
<div class="line">gScatterRaw-&gt;<a class="code hl_slot" href="class_j_k_q_t_p_x_y_graph.html#a972ee50c53accadade8880b3bd1110cc">setXYColumns</a>(colScatterRawX, colScatterRawY);</div>
<div class="line">gScatterRaw-&gt;<a class="code hl_function" href="class_j_k_q_t_p_x_y_parametrized_scatter_graph.html#a2e4da542e348ad0d6353fa91b3859516">setDrawLine</a>(<span class="keyword">false</span>);</div>
<div class="line">gScatterRaw-&gt;<a class="code hl_function" href="class_j_k_q_t_p_graph_symbol_style_mixin.html#af278c2bde3ba2b26341d4921748e1923">setSymbolType</a>(<a class="code hl_enumvalue" href="group__jkqtptools__drawing.html#ggacdaaac6baeadbfd3677d4d53ea594b5ba7d1d103c92b5fb6152ddf135315f3449">JKQTPCross</a>);</div>
<div class="line">gScatterRaw-&gt;<a class="code hl_function" href="class_j_k_q_t_p_graph_symbol_style_mixin.html#a7b5bdf1d3b33bcdc2ec82026e6fd55b9">setSymbolSize</a>(5);</div>
<div class="ttc" id="aclass_j_k_q_t_p_x_y_parametrized_scatter_graph_html"><div class="ttname"><a href="class_j_k_q_t_p_x_y_parametrized_scatter_graph.html">JKQTPXYParametrizedScatterGraph</a></div><div class="ttdoc">This implements xy scatter plots (like JKQTPXYScatterGraph), but the color and size of the symbols ma...</div><div class="ttdef"><b>Definition</b> jkqtpscatter.h:147</div></div>
<div class="ttc" id="aclass_j_k_q_t_p_x_y_parametrized_scatter_graph_html_a2e4da542e348ad0d6353fa91b3859516"><div class="ttname"><a href="class_j_k_q_t_p_x_y_parametrized_scatter_graph.html#a2e4da542e348ad0d6353fa91b3859516">JKQTPXYParametrizedScatterGraph::setDrawLine</a></div><div class="ttdeci">void setDrawLine(bool __value)</div><div class="ttdoc">indicates whether to draw a line or not</div></div>
</div><!-- fragment --><p>The resulting plot looks like this:</p>
<p><img src="https://raw.githubusercontent.com/jkriege2/JKQtPlotter/master/screenshots/datastore_groupedstat_scatterrawdata.png" alt="datastore_groupedstat_scatterrawdata" class="inline"/></p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md36"></a>
Calculating x- and y-Errors from Categorized Data</h2>
<p>Now we want to draw a scatterchart of the data, where data-points should be grouped together, in x-intervals of width 0.5. From all the points in each interval, we calculate the in both x- and y-direction the average and standard deviation. First we need to group the data using <span class="tt"><a class="el" href="group__jkqtptools__math__statistics__grouped.html#gad8a5870f70c3e43674f114b30de9ade7" title="groups data from an input range inFirstCat / inFirstValue ... inLastCat / outFirstCat representing pa...">jkqtpstatGroupData()</a></span>, which assembles the data points in each group groupeddataScatter. For the custom grouping of the datapoints we use the optional functor provided to <span class="tt"><a class="el" href="group__jkqtptools__math__statistics__grouped.html#gad8a5870f70c3e43674f114b30de9ade7" title="groups data from an input range inFirstCat / inFirstValue ... inLastCat / outFirstCat representing pa...">jkqtpstatGroupData()</a></span>: We use <span class="tt"><a class="el" href="group__jkqtptools__math__statistics__grouped.html#gae96355de0959ea4550f0a666c93d2209" title="assign each value to groups  ,  ,  ,  , ...">jkqtpstatGroupingCustomRound1D()</a></span> with given parameters 0.25 for the (center) location of the first bin and bin width 0.5. The functor is not built by hand (which would be possible using std::bind), but with the generator function <span class="tt"><a class="el" href="group__jkqtptools__math__statistics__grouped.html#ga7b8cc370c35c7267b74a734705fba6a8" title="generates a functor of jkqtpstatGroupingCustomRound1D() with the two paramaters firstGroupCenter and ...">jkqtpstatMakeGroupingCustomRound1D()</a></span>. In addition we use a variant of <span class="tt"><a class="el" href="group__jkqtptools__math__statistics__grouped.html#gad8a5870f70c3e43674f114b30de9ade7" title="groups data from an input range inFirstCat / inFirstValue ... inLastCat / outFirstCat representing pa...">jkqtpstatGroupData()</a></span>, which outputs a column with the category assigned to every data pair in the input data range: </p><div class="fragment"><div class="line">std::map&lt;double, std::pair&lt;std::vector&lt;double&gt;,std::vector&lt;double&gt; &gt; &gt; groupeddataScatter;</div>
<div class="line"><span class="keywordtype">size_t</span> colScatterRawGroup=datastore1-&gt;addColumn(<span class="stringliteral">&quot;scatterplot, rawdata, assigned-group&quot;</span>);</div>
<div class="line"><a class="code hl_function" href="group__jkqtptools__math__statistics__grouped.html#gad8a5870f70c3e43674f114b30de9ade7">jkqtpstatGroupData</a>(datastore1-&gt;begin(colScatterRawX), datastore1-&gt;end(colScatterRawX),</div>
<div class="line">                   datastore1-&gt;begin(colScatterRawY), datastore1-&gt;end(colScatterRawY),</div>
<div class="line">                   datastore1-&gt;backInserter(colScatterRawGroup),</div>
<div class="line">                   groupeddataScatter,</div>
<div class="line">                   <a class="code hl_function" href="group__jkqtptools__math__statistics__grouped.html#ga7b8cc370c35c7267b74a734705fba6a8">jkqtpstatMakeGroupingCustomRound1D</a>(0.25, 0.5));</div>
<div class="ttc" id="agroup__jkqtptools__math__statistics__grouped_html_ga7b8cc370c35c7267b74a734705fba6a8"><div class="ttname"><a href="group__jkqtptools__math__statistics__grouped.html#ga7b8cc370c35c7267b74a734705fba6a8">jkqtpstatMakeGroupingCustomRound1D</a></div><div class="ttdeci">jkqtmath_LIB_EXPORT JKQTPStatGroupDefinitionFunctor1D jkqtpstatMakeGroupingCustomRound1D(double firstGroupCenter, double groupWidth)</div><div class="ttdoc">generates a functor of jkqtpstatGroupingCustomRound1D() with the two paramaters firstGroupCenter and ...</div></div>
</div><!-- fragment --><p>The column colScatterRawGroup can now be used to color the scatter graph: </p><div class="fragment"><div class="line">gScatterRaw-&gt;<a class="code hl_function" href="class_j_k_q_t_p_x_y_parametrized_scatter_graph.html#af984efc85c9073ad2ba835c378064db5">setColorColumn</a>(colScatterRawGroup);</div>
<div class="ttc" id="aclass_j_k_q_t_p_x_y_parametrized_scatter_graph_html_af984efc85c9073ad2ba835c378064db5"><div class="ttname"><a href="class_j_k_q_t_p_x_y_parametrized_scatter_graph.html#af984efc85c9073ad2ba835c378064db5">JKQTPXYParametrizedScatterGraph::setColorColumn</a></div><div class="ttdeci">void setColorColumn(int __value)</div><div class="ttdoc">this column contains the symbol color</div></div>
</div><!-- fragment --><p>Now we can calculate the statistics for each group separately: Data is collected in two new columns. Then the statistics is calculated by simply iterating over <span class="tt">groupeddataScatter</span> and calling functions like <span class="tt"><a class="el" href="group__jkqtptools__math__statistics__basic.html#ga6a829fb0253c9cbaf541e23c45292808" title="calculates the average of a given data range first ... last">jkqtpstatAverage()</a></span> for each group: </p><div class="fragment"><div class="line"><span class="keywordtype">size_t</span> colScatterXAvg=datastore1-&gt;addColumn(<span class="stringliteral">&quot;scatter, x, average&quot;</span>);</div>
<div class="line"><span class="keywordtype">size_t</span> colScatterXStd=datastore1-&gt;addColumn(<span class="stringliteral">&quot;scatter, x, stddev&quot;</span>);</div>
<div class="line"><span class="keywordtype">size_t</span> colScatterYAvg=datastore1-&gt;addColumn(<span class="stringliteral">&quot;scatter, y, average&quot;</span>);</div>
<div class="line"><span class="keywordtype">size_t</span> colScatterYStd=datastore1-&gt;addColumn(<span class="stringliteral">&quot;scatter, y, stddev&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">for</span> (<span class="keyword">auto</span> it=groupeddataScatter.begin(); it!=groupeddataScatter.end(); ++it) {</div>
<div class="line">    datastore1-&gt;appendToColumn(colScatterXAvg, <a class="code hl_function" href="group__jkqtptools__math__statistics__basic.html#ga6a829fb0253c9cbaf541e23c45292808">jkqtpstatAverage</a>(it-&gt;second.first.begin(), it-&gt;second.first.end()));</div>
<div class="line">    datastore1-&gt;appendToColumn(colScatterXStd, <a class="code hl_function" href="group__jkqtptools__math__statistics__basic.html#ga0cbd4d4f762fe7c05fa143e643988c21">jkqtpstatStdDev</a>(it-&gt;second.first.begin(), it-&gt;second.first.end()));</div>
<div class="line">    datastore1-&gt;appendToColumn(colScatterYAvg, <a class="code hl_function" href="group__jkqtptools__math__statistics__basic.html#ga6a829fb0253c9cbaf541e23c45292808">jkqtpstatAverage</a>(it-&gt;second.second.begin(), it-&gt;second.second.end()));</div>
<div class="line">    datastore1-&gt;appendToColumn(colScatterYStd, <a class="code hl_function" href="group__jkqtptools__math__statistics__basic.html#ga0cbd4d4f762fe7c05fa143e643988c21">jkqtpstatStdDev</a>(it-&gt;second.second.begin(), it-&gt;second.second.end()));</div>
<div class="line">}</div>
</div><!-- fragment --><p>Finally the calculated groups are drawn </p><div class="fragment"><div class="line"><a class="code hl_class" href="class_j_k_q_t_p_x_y_line_error_graph.html">JKQTPXYLineErrorGraph</a>* gScatterErr;</div>
<div class="line">plotscattererrors-&gt;addGraph(gScatterErr=<span class="keyword">new</span> <a class="code hl_class" href="class_j_k_q_t_p_x_y_line_error_graph.html">JKQTPXYLineErrorGraph</a>(plotscattererrors));</div>
<div class="line">gScatterErr-&gt;<a class="code hl_slot" href="class_j_k_q_t_p_x_y_graph.html#a972ee50c53accadade8880b3bd1110cc">setXYColumns</a>(colScatterXAvg, colScatterYAvg);</div>
<div class="line">gScatterErr-&gt;<a class="code hl_function" href="class_j_k_q_t_p_x_graph_error_data.html#a58fd7a997de8c4d80e809a3c47c1ba3e">setXErrorColumn</a>(<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(colScatterXStd));</div>
<div class="line">gScatterErr-&gt;<a class="code hl_function" href="class_j_k_q_t_p_y_graph_error_data.html#a52350a8da0cbce7a98e6da445ad28b11">setYErrorColumn</a>(<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(colScatterYStd));</div>
<div class="line">gScatterErr-&gt;<a class="code hl_function" href="class_j_k_q_t_p_graph_symbol_style_mixin.html#af278c2bde3ba2b26341d4921748e1923">setSymbolType</a>(<a class="code hl_enumvalue" href="group__jkqtptools__drawing.html#ggacdaaac6baeadbfd3677d4d53ea594b5ba65f979bf79b9759cdef9c7824cbddcff">JKQTPFilledTriangle</a>);</div>
<div class="line">gScatterErr-&gt;<a class="code hl_function" href="class_j_k_q_t_p_x_y_line_graph.html#a1202afd954530d0c71c9a745755f7ae0">setDrawLine</a>(<span class="keyword">false</span>);</div>
<div class="ttc" id="aclass_j_k_q_t_p_x_graph_error_data_html_a58fd7a997de8c4d80e809a3c47c1ba3e"><div class="ttname"><a href="class_j_k_q_t_p_x_graph_error_data.html#a58fd7a997de8c4d80e809a3c47c1ba3e">JKQTPXGraphErrorData::setXErrorColumn</a></div><div class="ttdeci">void setXErrorColumn(int __value)</div><div class="ttdoc">the column that contains the error of the x-component of the datapoints</div></div>
<div class="ttc" id="aclass_j_k_q_t_p_x_y_line_error_graph_html"><div class="ttname"><a href="class_j_k_q_t_p_x_y_line_error_graph.html">JKQTPXYLineErrorGraph</a></div><div class="ttdoc">This implements xy line plots with x and y error indicators.</div><div class="ttdef"><b>Definition</b> jkqtplines.h:113</div></div>
<div class="ttc" id="agroup__jkqtptools__drawing_html_ggacdaaac6baeadbfd3677d4d53ea594b5ba65f979bf79b9759cdef9c7824cbddcff"><div class="ttname"><a href="group__jkqtptools__drawing.html#ggacdaaac6baeadbfd3677d4d53ea594b5ba65f979bf79b9759cdef9c7824cbddcff">JKQTPFilledTriangle</a></div><div class="ttdeci">@ JKQTPFilledTriangle</div><div class="ttdoc">a filled triangle (tip at top)</div><div class="ttdef"><b>Definition</b> jkqtpdrawingtools.h:153</div></div>
</div><!-- fragment --><p>The resulting plot looks like this:</p>
<p><img src="https://raw.githubusercontent.com/jkriege2/JKQtPlotter/master/screenshots/datastore_groupedstat_scatter.png" alt="datastore_groupedstat_scatter" class="inline"/></p>
<p>In order to safe yo the typing of the code above, shortcuts in the form of adaptors exist: </p><div class="fragment"><div class="line"><a class="code hl_function" href="group__jkqtptools__math__statistics__adaptors.html#ga8f220c1c5e79e6ca45798a5572515e63">jkqtpstatAddXYErrorLineGraph</a>(plotscattererrors-&gt;getPlotter(),</div>
<div class="line">                             datastore1-&gt;begin(colScatterRawX), datastore1-&gt;end(colScatterRawX),</div>
<div class="line">                             datastore1-&gt;begin(colScatterRawY), datastore1-&gt;end(colScatterRawY),</div>
<div class="line">                             <a class="code hl_function" href="group__jkqtptools__math__statistics__grouped.html#ga7b8cc370c35c7267b74a734705fba6a8">jkqtpstatMakeGroupingCustomRound1D</a>(0.25, 0.5));</div>
<div class="ttc" id="agroup__jkqtptools__math__statistics__adaptors_html_ga8f220c1c5e79e6ca45798a5572515e63"><div class="ttname"><a href="group__jkqtptools__math__statistics__adaptors.html#ga8f220c1c5e79e6ca45798a5572515e63">jkqtpstatAddXYErrorLineGraph</a></div><div class="ttdeci">JKQTPXYLineErrorGraph * jkqtpstatAddXYErrorLineGraph(JKQTBasePlotter *plotter, InputCatIt inFirstCat_X, InputCatIt inLastCat_X, InputValueIt inFirstValue_Y, InputValueIt inLastValue_Y, JKQTPStatGroupDefinitionFunctor1D groupDefFunc=&amp;jkqtpstatGroupingIdentity1D, const QString &amp;columnBaseName=QString(&quot;grouped data&quot;))</div><div class="ttdoc">create a JKQTPXYLineErrorGraph with y-direction error bars, calculated from average +/- stddev of gro...</div><div class="ttdef"><b>Definition</b> jkqtpstatisticsadaptors.h:2757</div></div>
</div><!-- fragment --><p> Also other flavors exist that generate different graphs (see the <a class="el" href="class_j_k_q_t_plotter.html" title="plotter widget for scientific plots (uses JKQTBasePlotter to do the actual drawing)">JKQTPlotter</a> documentation):</p><ul>
<li><span class="tt"><a class="el" href="group__jkqtptools__math__statistics__adaptors.html#ga8f220c1c5e79e6ca45798a5572515e63" title="create a JKQTPXYLineErrorGraph with y-direction error bars, calculated from average +/- stddev of gro...">jkqtpstatAddXYErrorLineGraph()</a></span></li>
<li><span class="tt"><a class="el" href="group__jkqtptools__math__statistics__adaptors.html#ga0f12275015b661626f8df4b67f663b38" title="create a JKQTPXYParametrizedErrorScatterGraph with y-direction error bars, calculated from average +/...">jkqtpstatAddXYErrorParametrizedScatterGraph()</a></span></li>
<li><span class="tt"><a class="el" href="group__jkqtptools__math__statistics__adaptors.html#ga4002745b907ffbe3445907228d16e2cd" title="create a plot with x- and y-direction error bars, calculated from directional average +/- stddev of g...">jkqtpstatAddXYErrorGraph()</a></span></li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md37"></a>
Screenshot of the full Program</h1>
<p>The output of the full test program <a href="https://github.com/jkriege2/JKQtPlotter/tree/master/examples/datastore_groupedstat/datastore_groupedstat.cpp"><span class="tt">datastore_groupedstat.cpp</span></a> looks like this:</p>
<p><img src="https://raw.githubusercontent.com/jkriege2/JKQtPlotter/master/screenshots/datastore_groupedstat.png" alt="datastore_groupedstat" class="inline"/> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- HTML footer for doxygen 1.9.3-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="example_tutorial_projects.html">Example &amp; Tutorial Projects</a></li>
    <li class="footer">Generated on <span class="timestamp"></span> for JKQTPlotter by <a href="https://www.doxygen.org/index.html">doxygen</a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
